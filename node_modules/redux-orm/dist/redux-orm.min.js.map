{"version":3,"sources":["webpack://ReduxOrm/webpack/universalModuleDefinition","webpack://ReduxOrm/webpack/bootstrap","webpack://ReduxOrm/./node_modules/@babel/runtime/helpers/createClass.js","webpack://ReduxOrm/./node_modules/@babel/runtime/helpers/inheritsLoose.js","webpack://ReduxOrm/./node_modules/@babel/runtime/helpers/typeof.js","webpack://ReduxOrm/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://ReduxOrm/./node_modules/reselect/lib/index.js","webpack://ReduxOrm/./node_modules/re-reselect/dist/index.js","webpack://ReduxOrm/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://ReduxOrm/./node_modules/lodash/_baseOrderBy.js","webpack://ReduxOrm/./node_modules/lodash/_baseIteratee.js","webpack://ReduxOrm/./node_modules/lodash/identity.js","webpack://ReduxOrm/./node_modules/lodash/isArray.js","webpack://ReduxOrm/./node_modules/lodash/filter.js","webpack://ReduxOrm/./node_modules/lodash/orderBy.js","webpack://ReduxOrm/./node_modules/lodash/reject.js","webpack://ReduxOrm/./node_modules/lodash/sortBy.js","webpack://ReduxOrm/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://ReduxOrm/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://ReduxOrm/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://ReduxOrm/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://ReduxOrm/./node_modules/lodash/_arrayMap.js","webpack://ReduxOrm/./node_modules/lodash/_baseMap.js","webpack://ReduxOrm/./node_modules/lodash/_baseSortBy.js","webpack://ReduxOrm/./node_modules/lodash/_baseUnary.js","webpack://ReduxOrm/./node_modules/lodash/_compareMultiple.js","webpack://ReduxOrm/./node_modules/lodash/_compareAscending.js","webpack://ReduxOrm/./node_modules/lodash/isSymbol.js","webpack://ReduxOrm/./node_modules/lodash/_arrayFilter.js","webpack://ReduxOrm/./node_modules/lodash/_baseFilter.js","webpack://ReduxOrm/./node_modules/lodash/negate.js","webpack://ReduxOrm/./node_modules/lodash/_baseFlatten.js","webpack://ReduxOrm/./node_modules/lodash/_baseRest.js","webpack://ReduxOrm/./node_modules/lodash/_overRest.js","webpack://ReduxOrm/./node_modules/lodash/_apply.js","webpack://ReduxOrm/./node_modules/lodash/_setToString.js","webpack://ReduxOrm/./node_modules/lodash/_isIterateeCall.js","webpack://ReduxOrm/./node_modules/ramda/es/internal/_isPlaceholder.js","webpack://ReduxOrm/./node_modules/ramda/es/internal/_curry1.js","webpack://ReduxOrm/./node_modules/ramda/es/internal/_arity.js","webpack://ReduxOrm/./node_modules/ramda/es/internal/_curry2.js","webpack://ReduxOrm/./node_modules/ramda/es/curryN.js","webpack://ReduxOrm/./node_modules/ramda/es/internal/_curryN.js","webpack://ReduxOrm/./node_modules/ramda/es/curry.js","webpack://ReduxOrm/./node_modules/ramda/es/__.js","webpack://ReduxOrm/./node_modules/immutable-ops/es/index.js","webpack://ReduxOrm/./src/constants.js","webpack://ReduxOrm/./src/utils.js","webpack://ReduxOrm/./src/QuerySet.js","webpack://ReduxOrm/./src/Session.js","webpack://ReduxOrm/./src/fields/DefaultFieldInstaller.js","webpack://ReduxOrm/./src/fields/FieldInstallerTemplate.js","webpack://ReduxOrm/./src/fields/Field.js","webpack://ReduxOrm/./src/descriptors.js","webpack://ReduxOrm/./src/fields/Attribute.js","webpack://ReduxOrm/./src/fields/RelationalField.js","webpack://ReduxOrm/./src/fields/ForeignKey.js","webpack://ReduxOrm/./src/fields/ManyToMany.js","webpack://ReduxOrm/./src/fields/OneToOne.js","webpack://ReduxOrm/./src/fields/index.js","webpack://ReduxOrm/./src/Model.js","webpack://ReduxOrm/./src/db/Table.js","webpack://ReduxOrm/./src/db/Database.js","webpack://ReduxOrm/./src/selectors/SelectorSpec.js","webpack://ReduxOrm/./src/selectors/ModelBasedSelectorSpec.js","webpack://ReduxOrm/./src/selectors/idArgSelector.js","webpack://ReduxOrm/./src/selectors/MapSelectorSpec.js","webpack://ReduxOrm/./src/selectors/ModelSelectorSpec.js","webpack://ReduxOrm/./src/selectors/FieldSelectorSpec.js","webpack://ReduxOrm/./src/selectors/index.js","webpack://ReduxOrm/./src/ORM.js","webpack://ReduxOrm/./src/memoize.js","webpack://ReduxOrm/./src/redux.js","webpack://ReduxOrm/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_defineProperties","target","props","length","descriptor","configurable","writable","Constructor","protoProps","staticProps","subClass","superClass","constructor","__proto__","_typeof","obj","iterator","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","arr","defaultEqualityCheck","a","b","areArgumentsShallowlyEqual","equalityCheck","prev","next","defaultMemoize","func","arguments","undefined","lastArgs","lastResult","apply","getDependencies","funcs","dependencies","Array","isArray","every","dep","dependencyTypes","map","join","Error","createSelectorCreator","memoize","_len","memoizeOptions","_key","_len2","_key2","recomputations","resultFunc","pop","memoizedResultFunc","concat","selector","params","push","resetRecomputations","createStructuredSelector","selectors","selectorCreator","createSelector","objectKeys","keys","_len3","values","_key3","reduce","composition","index","reselect","isStringOrNumber","FlatObjectCache","this","_cache","_proto","set","selectorFn","remove","clear","isValidCacheKey","cacheKey","defaultCacheCreator","defaultCacheKeyValidator","createCachedSelector","polymorphicOptions","legacyOptions","options","assign","keySelector","cache","cacheObject","keySelectorCreator","inputSelectors","cacheResponse","console","warn","getMatchingSelector","removeMatchingSelector","clearCache","validateCacheSize","cacheSize","Number","isInteger","FifoObjectCache","_temp","_cacheOrdering","_cacheSize","earliest","indexOf","splice","LruObjectCache","_registerCacheHit","_deleteCacheHit","FlatMapCache","Map","FifoMapCache","size","LruMapCache","has","FifoCacheObject","FlatCacheObject","LruCacheObject","createStructuredCachedSelector","default","len","arr2","arrayMap","baseIteratee","baseMap","baseSortBy","baseUnary","compareMultiple","identity","collection","iteratees","orders","result","iteratee","other","array","predicate","resIndex","baseOrderBy","guard","arrayFilter","baseFilter","negate","baseFlatten","baseRest","isIterateeCall","sortBy","arrayLikeToArray","iter","from","minLen","toString","slice","test","TypeError","comparer","sort","compareAscending","objCriteria","criteria","othCriteria","ordersLength","isSymbol","valIsDefined","valIsNull","valIsReflexive","valIsSymbol","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","FUNC_ERROR_TEXT","args","overRest","setToString","start","nativeMax","Math","max","transform","otherArgs","thisArg","_isPlaceholder","_curry1","fn","f1","_arity","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","_curry2","f2","_b","_a","_curryN","received","combined","argsIdx","left","combinedIdx","forOwn","OWNER_ID_TAG","canMutate","ownerID","getBatchToken","prepareNewObject","instance","addOwnerID","forceArray","arg","PATH_SEPARATOR","normalizePath","pathArg","split","mutableSet","mutableMerge","isDeep","_mergeObjs","baseObj","mergeObjs","forEach","mergeObj","assignValue","mutableShallowMerge","mutableDeepMerge","mutableOmit","_keys","shouldMergeKey","immutableMerge","hasChanges","nextObject","willChange","mergeValue","currentValue","recursiveMergeResult","immutableDeepMerge","immutableArrSet","newArr","copied","fastArrayCopy","mutableArrFilter","currIndex","originalIndex","mutableArrSplice","deleteCount","_vals","vals","mutableArrInsert","immutableArrSplice","immutableArrInsert","immutableOperations","merge","deepMerge","omit","keysInObj","filter","newObj","setIn","_pathArg","acc","currRef","valueInPath","pathLen","rootObj","curr","idx","currType","_newObj","pathRepr","insert","isArrayLike","mutableOperations","originalPathArg","done","immutableOps","mutableOps","batchOps","mutable","batch","batched","_token","_fn","token","immutableOpsBoundToToken","__","getImmutableOps","UPDATE","DELETE","CREATE","FILTER","EXCLUDE","SUCCESS","ALL_INSTANCES","ID_ARG_KEY_SELECTOR","_state","idArg","warnDeprecated","msg","log","m2mName","declarationModelName","fieldName","string","charAt","toUpperCase","m2mFromFieldName","m2mToFieldName","otherModelName","querySetDelegatorFactory","methodName","getQuerySet","querySetGetterDelegatorFactory","getterName","attachQuerySetMethods","modelClass","querySetClass","leftToDefine","sharedMethods","currClass","Function","getPrototypeOf","forEachSuperClass","cls","defined","getOwnPropertyDescriptor","normalizeEntity","entity","getId","ops","clauseFiltersByAttribute","type","payload","attribute","attributeValue","mapValues","entries","newObject","normalizeModelReference","modelNameOrClass","modelName","QuerySet","clauses","opts","_opts","addSharedMethod","_new","userOpts","_evaluate","rows","id","withId","toRefArray","toModelArray","ModelClass","count","exists","Boolean","at","first","last","all","lookupObj","normalizedLookupObj","filterDescriptor","exclude","excludeDescriptor","session","_evaluated","table","querySpec","query","orderBy","orderByDescriptor","update","applyUpdate","action","delete","model","_onDelete","Session","schema","db","state","withMutations","batchToken","getEmptyState","initialState","modelData","models","getModelClasses","sessionBoundModels","SessionBoundModel","Reflect","construct","setPrototypeOf","connect","getDataForModel","getModelData","markAccessed","modelIds","data","accessedInstances","markFullTableScanned","fullTableScanned","markAccessedIndexes","indexes","attr","accessedIndexes","updateSpec","tx","_getTransaction","status","_markAccessedByQuery","includes","idAttribute","accessedIds","Set","row","anyClauseFilteredByPk","some","clause","add","getNextState","DefaultFieldInstaller","installForwardsDescriptor","field","createForwardsDescriptor","toModel","throughModel","installForwardsVirtualField","virtualFields","createForwardsVirtualField","installBackwardsDescriptor","backwardsFieldName","toModelName","createBackwardsDescriptor","installBackwardsVirtualField","createBackwardsVirtualField","orm","references","run","installsForwardsVirtualField","installsBackwardsDescriptor","installsBackwardsVirtualField","_toModel","_throughModel","throughModelName","getThroughModelName","getBackwardsFieldName","Field","getClass","forwardsManyToOneDescriptor","declaredToModelName","DeclaredToModel","toId","_fields","manyToManyDescriptor","declaredFromModelName","throughFields","reverse","DeclaredFromModel","ThroughModel","ThisModel","OtherModel","thisReferencingField","to","otherReferencingField","thisId","throughQs","referencedOtherIds","qs","otherModelInstance","entities","idsToAdd","existingQs","through","existingIds","idsToRemove","entitiesToDelete","entitiesToDeleteIds","unexistingIds","Attribute","getDefault","attrDescriptor","RelationalField","relatedName","as","toLowerCase","ForeignKey","declaredFieldName","ManyToMany","getThroughFields","fieldAName","fieldBName","fieldA","fields","throughModelFieldReferencing","otherModel","find","someFieldName","OneToOne","forwardsOneToOneDescriptor","fk","many","oneToOne","getByIdQuery","modelInstance","Model","_initFields","propsObj","ids","_session","QuerySetClass","invalidateClassCache","isSetUp","tableOptions","backend","userProps","m2mRelations","declaredFieldNames","declaredVirtualFieldNames","valuePassed","_refreshMany2Many","upsert","idExists","_findDatabaseRows","equals","entriesInA","objectShallowEquals","propertyName","userMergeObj","mergeKey","mergedFields","updatedModel","refreshFromState","ref","relations","normalizedNewIds","uniqueIds","fromField","toField","diffActions","sourceArr","targetArr","itemsInBoth","item","deleteItems","addItems","arrayDiffActions","idsToDelete","relatedQs","hasId","describe","DEFAULT_TABLE_OPTIONS","arrName","mapName","Table","accessId","branch","accessIds","accessIdList","accessList","getMaxId","getMeta","setMaxId","newMaxId","setMeta","nextId","meta","optimallyOrderedClauses","clauseReducesResultSetSize","reducer","remainingPayload","withoutPkAttr","filterAttr","indexAttrs","lastIndex","indexedIds","indexSet","withoutIndexAttrs","reject","convert","order","normalizeOrders","entry","workingState","_currMax","userPassedId","newMax","newId","currMax","idSequencer","finalEntry","indexesToAppendTo","fkAttr","attrIndex","created","nextIndexes","indexMap","indexedAttrs","indexIdsToAdd","indexIdsToDelete","nextMap","prevAttrValues","valueMap","mergeObjInto","nextAttrValues","nextRow","prevValue","nextValue","rowId","valueIndex","attrIndexMap","BASE_EMPTY_STATE","tables","tableName","nextTableState","resultPayload","currTableState","nextDBState","newTableState","replaceTableState","createDatabase","schemaSpec","tableSpecs","tableSpec","SelectorSpec","parent","_parent","_orm","cachePath","ModelBasedSelectorSpec","_model","valueForInstance","idArgSelector","MapSelectorSpec","_field","_selector","createResultFunc","parentSelector","parentResult","single","refArray","ModelSelectorSpec","FieldSelectorSpec","fieldModel","accessorName","isVirtual","_fieldModel","_accessorName","_isVirtual","ParentToModel","parentRef","parentInstance","JSON","stringify","getDatabase","createFieldSelectorSpec","fieldSelectorSpec","relatedFieldName","relatedField","fieldAccessorName","ORM_DEFAULTS","defaultCreateDatabase","RESERVED_TABLE_OPTIONS","isReservedTableOption","word","ORM","registry","implicitThroughModels","installedFields","stateSelector","register","registerManyToManyModelsFor","_setupModelPrototypes","modelSelectorSpec","createModelSelectorSpec","thisModelName","fieldInstance","selfReferencing","fromFieldName","toFieldName","Through","PlainForeignKey","ForeignKeyClass","allModels","found","generateSchemaSpec","spec","mutableSession","_isFieldInstalled","_installField","_setFieldInstalled","FieldInstaller","installerClass","getDefaultState","isOrmState","argsAreEqual","nextArgs","accessedModelInstancesAreEqual","previous","ormState","instances","previousRows","rowsA","rowsB","rowsAreEqual","accessedIndexesAreEqual","column","fullTableScannedModelsAreEqual","fullTableScannedModels","argEqualityCheck","stateAndArgs","argsWithSession","accessedModelInstances","defaultUpdater","createReducer","updater","toORM","selectorCache","SELECTOR_KEY","for","toSelector","level","storageKey","createSelectorFromSpec","resultArg","inputFuncs","Schema","Backend"],"mappings":"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","file":"redux-orm.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ReduxOrm\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReduxOrm\"] = factory();\n\telse\n\t\troot[\"ReduxOrm\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 35);\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nmodule.exports = _inheritsLoose;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","'use strict';\n\nexports.__esModule = true;\nexports.defaultMemoize = defaultMemoize;\nexports.createSelectorCreator = createSelectorCreator;\nexports.createStructuredSelector = createStructuredSelector;\nfunction defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n  var length = prev.length;\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n\n  var lastArgs = null;\n  var lastResult = null;\n  // we reference arguments instead of spreading them for performance reasons\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nfunction createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++;\n      // apply arguments instead of spreading for performance.\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions));\n\n    // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n    var selector = defaultMemoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      }\n\n      // apply arguments instead of spreading for performance.\n      return memoizedResultFunc.apply(null, params);\n    });\n\n    selector.resultFunc = resultFunc;\n    selector.recomputations = function () {\n      return recomputations;\n    };\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n    return selector;\n  };\n}\n\nvar createSelector = exports.createSelector = createSelectorCreator(defaultMemoize);\n\nfunction createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('reselect')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'reselect'], factory) :\n  (global = global || self, factory(global['Re-reselect'] = {}, global.Reselect));\n}(this, function (exports, reselect) { 'use strict';\n\n  function isStringOrNumber(value) {\n    return typeof value === 'string' || typeof value === 'number';\n  }\n\n  var FlatObjectCache =\n  /*#__PURE__*/\n  function () {\n    function FlatObjectCache() {\n      this._cache = {};\n    }\n\n    var _proto = FlatObjectCache.prototype;\n\n    _proto.set = function set(key, selectorFn) {\n      this._cache[key] = selectorFn;\n    };\n\n    _proto.get = function get(key) {\n      return this._cache[key];\n    };\n\n    _proto.remove = function remove(key) {\n      delete this._cache[key];\n    };\n\n    _proto.clear = function clear() {\n      this._cache = {};\n    };\n\n    _proto.isValidCacheKey = function isValidCacheKey(cacheKey) {\n      return isStringOrNumber(cacheKey);\n    };\n\n    return FlatObjectCache;\n  }();\n\n  var defaultCacheCreator = FlatObjectCache;\n\n  var defaultCacheKeyValidator = function defaultCacheKeyValidator() {\n    return true;\n  };\n\n  function createCachedSelector() {\n    for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n      funcs[_key] = arguments[_key];\n    }\n\n    return function (polymorphicOptions, legacyOptions) {\n      // @NOTE Versions 0.x/1.x accepted \"options\" as a function\n      if (typeof legacyOptions === 'function') {\n        throw new Error('[re-reselect] Second argument \"options\" must be an object. Please use \"options.selectorCreator\" to provide a custom selectorCreator.');\n      }\n\n      var options = {};\n\n      if (typeof polymorphicOptions === 'function') {\n        Object.assign(options, legacyOptions, {\n          keySelector: polymorphicOptions\n        }); // @TODO add legacyOptions deprecation notice in next major release\n      } else {\n        Object.assign(options, polymorphicOptions);\n      } // https://github.com/reduxjs/reselect/blob/v4.0.0/src/index.js#L54\n\n\n      var recomputations = 0;\n      var resultFunc = funcs.pop();\n      var dependencies = Array.isArray(funcs[0]) ? funcs[0] : [].concat(funcs);\n\n      var resultFuncWithRecomputations = function resultFuncWithRecomputations() {\n        recomputations++;\n        return resultFunc.apply(void 0, arguments);\n      };\n\n      funcs.push(resultFuncWithRecomputations);\n      var cache = options.cacheObject || new defaultCacheCreator();\n      var selectorCreator = options.selectorCreator || reselect.createSelector;\n      var isValidCacheKey = cache.isValidCacheKey || defaultCacheKeyValidator;\n\n      if (options.keySelectorCreator) {\n        options.keySelector = options.keySelectorCreator({\n          keySelector: options.keySelector,\n          inputSelectors: dependencies,\n          resultFunc: resultFunc\n        });\n      } // Application receives this function\n\n\n      var selector = function selector() {\n        var cacheKey = options.keySelector.apply(options, arguments);\n\n        if (isValidCacheKey(cacheKey)) {\n          var cacheResponse = cache.get(cacheKey);\n\n          if (cacheResponse === undefined) {\n            cacheResponse = selectorCreator.apply(void 0, funcs);\n            cache.set(cacheKey, cacheResponse);\n          }\n\n          return cacheResponse.apply(void 0, arguments);\n        }\n\n        console.warn(\"[re-reselect] Invalid cache key \\\"\" + cacheKey + \"\\\" has been returned by keySelector function.\");\n        return undefined;\n      }; // Further selector methods\n\n\n      selector.getMatchingSelector = function () {\n        var cacheKey = options.keySelector.apply(options, arguments); // @NOTE It might update cache hit count in LRU-like caches\n\n        return cache.get(cacheKey);\n      };\n\n      selector.removeMatchingSelector = function () {\n        var cacheKey = options.keySelector.apply(options, arguments);\n        cache.remove(cacheKey);\n      };\n\n      selector.clearCache = function () {\n        cache.clear();\n      };\n\n      selector.resultFunc = resultFunc;\n      selector.dependencies = dependencies;\n      selector.cache = cache;\n\n      selector.recomputations = function () {\n        return recomputations;\n      };\n\n      selector.resetRecomputations = function () {\n        return recomputations = 0;\n      };\n\n      selector.keySelector = options.keySelector;\n      return selector;\n    };\n  }\n\n  function createStructuredCachedSelector(selectors) {\n    return reselect.createStructuredSelector(selectors, createCachedSelector);\n  }\n\n  function validateCacheSize(cacheSize) {\n    if (cacheSize === undefined) {\n      throw new Error('Missing the required property \"cacheSize\".');\n    }\n\n    if (!Number.isInteger(cacheSize) || cacheSize <= 0) {\n      throw new Error('The \"cacheSize\" property must be a positive integer value.');\n    }\n  }\n\n  var FifoObjectCache =\n  /*#__PURE__*/\n  function () {\n    function FifoObjectCache(_temp) {\n      var _ref = _temp === void 0 ? {} : _temp,\n          cacheSize = _ref.cacheSize;\n\n      validateCacheSize(cacheSize);\n      this._cache = {};\n      this._cacheOrdering = [];\n      this._cacheSize = cacheSize;\n    }\n\n    var _proto = FifoObjectCache.prototype;\n\n    _proto.set = function set(key, selectorFn) {\n      this._cache[key] = selectorFn;\n\n      this._cacheOrdering.push(key);\n\n      if (this._cacheOrdering.length > this._cacheSize) {\n        var earliest = this._cacheOrdering[0];\n        this.remove(earliest);\n      }\n    };\n\n    _proto.get = function get(key) {\n      return this._cache[key];\n    };\n\n    _proto.remove = function remove(key) {\n      var index = this._cacheOrdering.indexOf(key);\n\n      if (index > -1) {\n        this._cacheOrdering.splice(index, 1);\n      }\n\n      delete this._cache[key];\n    };\n\n    _proto.clear = function clear() {\n      this._cache = {};\n      this._cacheOrdering = [];\n    };\n\n    _proto.isValidCacheKey = function isValidCacheKey(cacheKey) {\n      return isStringOrNumber(cacheKey);\n    };\n\n    return FifoObjectCache;\n  }();\n\n  var LruObjectCache =\n  /*#__PURE__*/\n  function () {\n    function LruObjectCache(_temp) {\n      var _ref = _temp === void 0 ? {} : _temp,\n          cacheSize = _ref.cacheSize;\n\n      validateCacheSize(cacheSize);\n      this._cache = {};\n      this._cacheOrdering = [];\n      this._cacheSize = cacheSize;\n    }\n\n    var _proto = LruObjectCache.prototype;\n\n    _proto.set = function set(key, selectorFn) {\n      this._cache[key] = selectorFn;\n\n      this._registerCacheHit(key);\n\n      if (this._cacheOrdering.length > this._cacheSize) {\n        var earliest = this._cacheOrdering[0];\n        this.remove(earliest);\n      }\n    };\n\n    _proto.get = function get(key) {\n      this._registerCacheHit(key);\n\n      return this._cache[key];\n    };\n\n    _proto.remove = function remove(key) {\n      this._deleteCacheHit(key);\n\n      delete this._cache[key];\n    };\n\n    _proto.clear = function clear() {\n      this._cache = {};\n      this._cacheOrdering = [];\n    };\n\n    _proto._registerCacheHit = function _registerCacheHit(key) {\n      this._deleteCacheHit(key);\n\n      this._cacheOrdering.push(key);\n    };\n\n    _proto._deleteCacheHit = function _deleteCacheHit(key) {\n      var index = this._cacheOrdering.indexOf(key);\n\n      if (index > -1) {\n        this._cacheOrdering.splice(index, 1);\n      }\n    };\n\n    _proto.isValidCacheKey = function isValidCacheKey(cacheKey) {\n      return isStringOrNumber(cacheKey);\n    };\n\n    return LruObjectCache;\n  }();\n\n  var FlatMapCache =\n  /*#__PURE__*/\n  function () {\n    function FlatMapCache() {\n      this._cache = new Map();\n    }\n\n    var _proto = FlatMapCache.prototype;\n\n    _proto.set = function set(key, selectorFn) {\n      this._cache.set(key, selectorFn);\n    };\n\n    _proto.get = function get(key) {\n      return this._cache.get(key);\n    };\n\n    _proto.remove = function remove(key) {\n      this._cache[\"delete\"](key);\n    };\n\n    _proto.clear = function clear() {\n      this._cache.clear();\n    };\n\n    return FlatMapCache;\n  }();\n\n  var FifoMapCache =\n  /*#__PURE__*/\n  function () {\n    function FifoMapCache(_temp) {\n      var _ref = _temp === void 0 ? {} : _temp,\n          cacheSize = _ref.cacheSize;\n\n      validateCacheSize(cacheSize);\n      this._cache = new Map();\n      this._cacheSize = cacheSize;\n    }\n\n    var _proto = FifoMapCache.prototype;\n\n    _proto.set = function set(key, selectorFn) {\n      this._cache.set(key, selectorFn);\n\n      if (this._cache.size > this._cacheSize) {\n        var earliest = this._cache.keys().next().value;\n\n        this.remove(earliest);\n      }\n    };\n\n    _proto.get = function get(key) {\n      return this._cache.get(key);\n    };\n\n    _proto.remove = function remove(key) {\n      this._cache[\"delete\"](key);\n    };\n\n    _proto.clear = function clear() {\n      this._cache.clear();\n    };\n\n    return FifoMapCache;\n  }();\n\n  var LruMapCache =\n  /*#__PURE__*/\n  function () {\n    function LruMapCache(_temp) {\n      var _ref = _temp === void 0 ? {} : _temp,\n          cacheSize = _ref.cacheSize;\n\n      validateCacheSize(cacheSize);\n      this._cache = new Map();\n      this._cacheSize = cacheSize;\n    }\n\n    var _proto = LruMapCache.prototype;\n\n    _proto.set = function set(key, selectorFn) {\n      this._cache.set(key, selectorFn);\n\n      if (this._cache.size > this._cacheSize) {\n        var earliest = this._cache.keys().next().value;\n\n        this.remove(earliest);\n      }\n    };\n\n    _proto.get = function get(key) {\n      var value = this._cache.get(key); // Register cache hit\n\n\n      if (this._cache.has(key)) {\n        this.remove(key);\n\n        this._cache.set(key, value);\n      }\n\n      return value;\n    };\n\n    _proto.remove = function remove(key) {\n      this._cache[\"delete\"](key);\n    };\n\n    _proto.clear = function clear() {\n      this._cache.clear();\n    };\n\n    return LruMapCache;\n  }();\n\n  exports.FifoCacheObject = FifoObjectCache;\n  exports.FifoMapCache = FifoMapCache;\n  exports.FifoObjectCache = FifoObjectCache;\n  exports.FlatCacheObject = FlatObjectCache;\n  exports.FlatMapCache = FlatMapCache;\n  exports.FlatObjectCache = FlatObjectCache;\n  exports.LruCacheObject = LruMapCache;\n  exports.LruMapCache = LruMapCache;\n  exports.LruObjectCache = LruObjectCache;\n  exports.createStructuredCachedSelector = createStructuredCachedSelector;\n  exports.default = createCachedSelector;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n//# sourceMappingURL=index.js.map\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    baseSortBy = require('./_baseSortBy'),\n    baseUnary = require('./_baseUnary'),\n    compareMultiple = require('./_compareMultiple'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  var index = -1;\n  iteratees = arrayMap(iteratees.length ? iteratees : [identity], baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nmodule.exports = baseOrderBy;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","var baseOrderBy = require('./_baseOrderBy'),\n    isArray = require('./isArray');\n\n/**\n * This method is like `_.sortBy` except that it allows specifying the sort\n * orders of the iteratees to sort by. If `orders` is unspecified, all values\n * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n * descending or \"asc\" for ascending sort order of corresponding values.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @param {string[]} [orders] The sort orders of `iteratees`.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 34 },\n *   { 'user': 'fred',   'age': 40 },\n *   { 'user': 'barney', 'age': 36 }\n * ];\n *\n * // Sort by `user` in ascending order and by `age` in descending order.\n * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n */\nfunction orderBy(collection, iteratees, orders, guard) {\n  if (collection == null) {\n    return [];\n  }\n  if (!isArray(iteratees)) {\n    iteratees = iteratees == null ? [] : [iteratees];\n  }\n  orders = guard ? undefined : orders;\n  if (!isArray(orders)) {\n    orders = orders == null ? [] : [orders];\n  }\n  return baseOrderBy(collection, iteratees, orders);\n}\n\nmodule.exports = orderBy;\n","var arrayFilter = require('./_arrayFilter'),\n    baseFilter = require('./_baseFilter'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray'),\n    negate = require('./negate');\n\n/**\n * The opposite of `_.filter`; this method returns the elements of `collection`\n * that `predicate` does **not** return truthy for.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.filter\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': false },\n *   { 'user': 'fred',   'age': 40, 'active': true }\n * ];\n *\n * _.reject(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.reject(users, { 'age': 40, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.reject(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.reject(users, 'active');\n * // => objects for ['barney']\n */\nfunction reject(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, negate(baseIteratee(predicate, 3)));\n}\n\nmodule.exports = reject;\n","var baseFlatten = require('./_baseFlatten'),\n    baseOrderBy = require('./_baseOrderBy'),\n    baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 40 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 40], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nmodule.exports = sortBy;\n","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nmodule.exports = baseSortBy;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var compareAscending = require('./_compareAscending');\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nmodule.exports = compareMultiple;\n","var isSymbol = require('./isSymbol');\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nmodule.exports = compareAscending;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that negates the result of the predicate `func`. The\n * `func` predicate is invoked with the `this` binding and arguments of the\n * created function.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {Function} predicate The predicate to negate.\n * @returns {Function} Returns the new negated function.\n * @example\n *\n * function isEven(n) {\n *   return n % 2 == 0;\n * }\n *\n * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n * // => [1, 3, 5]\n */\nfunction negate(predicate) {\n  if (typeof predicate != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  return function() {\n    var args = arguments;\n    switch (args.length) {\n      case 0: return !predicate.call(this);\n      case 1: return !predicate.call(this, args[0]);\n      case 2: return !predicate.call(this, args[0], args[1]);\n      case 3: return !predicate.call(this, args[0], args[1], args[2]);\n    }\n    return !predicate.apply(this, args);\n  };\n}\n\nmodule.exports = negate;\n","/**\n * Gets the first element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias first\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the first element of `array`.\n * @example\n *\n * _.head([1, 2, 3]);\n * // => 1\n *\n * _.head([]);\n * // => undefined\n */\nfunction head(array) {\n  return (array && array.length) ? array[0] : undefined;\n}\n\nmodule.exports = head;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","export default function _isPlaceholder(a) {\n       return a != null && typeof a === 'object' && a['@@functional/placeholder'] === true;\n}","import _isPlaceholder from './_isPlaceholder.js';\n\n/**\n * Optimized internal one-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nexport default function _curry1(fn) {\n  return function f1(a) {\n    if (arguments.length === 0 || _isPlaceholder(a)) {\n      return f1;\n    } else {\n      return fn.apply(this, arguments);\n    }\n  };\n}","export default function _arity(n, fn) {\n  /* eslint-disable no-unused-vars */\n  switch (n) {\n    case 0:\n      return function () {\n        return fn.apply(this, arguments);\n      };\n    case 1:\n      return function (a0) {\n        return fn.apply(this, arguments);\n      };\n    case 2:\n      return function (a0, a1) {\n        return fn.apply(this, arguments);\n      };\n    case 3:\n      return function (a0, a1, a2) {\n        return fn.apply(this, arguments);\n      };\n    case 4:\n      return function (a0, a1, a2, a3) {\n        return fn.apply(this, arguments);\n      };\n    case 5:\n      return function (a0, a1, a2, a3, a4) {\n        return fn.apply(this, arguments);\n      };\n    case 6:\n      return function (a0, a1, a2, a3, a4, a5) {\n        return fn.apply(this, arguments);\n      };\n    case 7:\n      return function (a0, a1, a2, a3, a4, a5, a6) {\n        return fn.apply(this, arguments);\n      };\n    case 8:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        return fn.apply(this, arguments);\n      };\n    case 9:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        return fn.apply(this, arguments);\n      };\n    case 10:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {\n        return fn.apply(this, arguments);\n      };\n    default:\n      throw new Error('First argument to _arity must be a non-negative integer no greater than ten');\n  }\n}","import _curry1 from './_curry1.js';\nimport _isPlaceholder from './_isPlaceholder.js';\n\n/**\n * Optimized internal two-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nexport default function _curry2(fn) {\n  return function f2(a, b) {\n    switch (arguments.length) {\n      case 0:\n        return f2;\n      case 1:\n        return _isPlaceholder(a) ? f2 : _curry1(function (_b) {\n          return fn(a, _b);\n        });\n      default:\n        return _isPlaceholder(a) && _isPlaceholder(b) ? f2 : _isPlaceholder(a) ? _curry1(function (_a) {\n          return fn(_a, b);\n        }) : _isPlaceholder(b) ? _curry1(function (_b) {\n          return fn(a, _b);\n        }) : fn(a, b);\n    }\n  };\n}","import _arity from './internal/_arity.js';\nimport _curry1 from './internal/_curry1.js';\nimport _curry2 from './internal/_curry2.js';\nimport _curryN from './internal/_curryN.js';\n\n/**\n * Returns a curried equivalent of the provided function, with the specified\n * arity. The curried function has two unusual capabilities. First, its\n * arguments needn't be provided one at a time. If `g` is `R.curryN(3, f)`, the\n * following are equivalent:\n *\n *   - `g(1)(2)(3)`\n *   - `g(1)(2, 3)`\n *   - `g(1, 2)(3)`\n *   - `g(1, 2, 3)`\n *\n * Secondly, the special placeholder value [`R.__`](#__) may be used to specify\n * \"gaps\", allowing partial application of any combination of arguments,\n * regardless of their positions. If `g` is as above and `_` is [`R.__`](#__),\n * the following are equivalent:\n *\n *   - `g(1, 2, 3)`\n *   - `g(_, 2, 3)(1)`\n *   - `g(_, _, 3)(1)(2)`\n *   - `g(_, _, 3)(1, 2)`\n *   - `g(_, 2)(1)(3)`\n *   - `g(_, 2)(1, 3)`\n *   - `g(_, 2)(_, 3)(1)`\n *\n * @func\n * @memberOf R\n * @since v0.5.0\n * @category Function\n * @sig Number -> (* -> a) -> (* -> a)\n * @param {Number} length The arity for the returned function.\n * @param {Function} fn The function to curry.\n * @return {Function} A new, curried function.\n * @see R.curry\n * @example\n *\n *      const sumArgs = (...args) => R.sum(args);\n *\n *      const curriedAddFourNumbers = R.curryN(4, sumArgs);\n *      const f = curriedAddFourNumbers(1, 2);\n *      const g = f(3);\n *      g(4); //=> 10\n */\nvar curryN = /*#__PURE__*/_curry2(function curryN(length, fn) {\n  if (length === 1) {\n    return _curry1(fn);\n  }\n  return _arity(length, _curryN(length, [], fn));\n});\nexport default curryN;","import _arity from './_arity.js';\nimport _isPlaceholder from './_isPlaceholder.js';\n\n/**\n * Internal curryN function.\n *\n * @private\n * @category Function\n * @param {Number} length The arity of the curried function.\n * @param {Array} received An array of arguments received thus far.\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nexport default function _curryN(length, received, fn) {\n  return function () {\n    var combined = [];\n    var argsIdx = 0;\n    var left = length;\n    var combinedIdx = 0;\n    while (combinedIdx < received.length || argsIdx < arguments.length) {\n      var result;\n      if (combinedIdx < received.length && (!_isPlaceholder(received[combinedIdx]) || argsIdx >= arguments.length)) {\n        result = received[combinedIdx];\n      } else {\n        result = arguments[argsIdx];\n        argsIdx += 1;\n      }\n      combined[combinedIdx] = result;\n      if (!_isPlaceholder(result)) {\n        left -= 1;\n      }\n      combinedIdx += 1;\n    }\n    return left <= 0 ? fn.apply(this, combined) : _arity(left, _curryN(length, combined, fn));\n  };\n}","import _curry1 from './internal/_curry1.js';\nimport curryN from './curryN.js';\n\n/**\n * Returns a curried equivalent of the provided function. The curried function\n * has two unusual capabilities. First, its arguments needn't be provided one\n * at a time. If `f` is a ternary function and `g` is `R.curry(f)`, the\n * following are equivalent:\n *\n *   - `g(1)(2)(3)`\n *   - `g(1)(2, 3)`\n *   - `g(1, 2)(3)`\n *   - `g(1, 2, 3)`\n *\n * Secondly, the special placeholder value [`R.__`](#__) may be used to specify\n * \"gaps\", allowing partial application of any combination of arguments,\n * regardless of their positions. If `g` is as above and `_` is [`R.__`](#__),\n * the following are equivalent:\n *\n *   - `g(1, 2, 3)`\n *   - `g(_, 2, 3)(1)`\n *   - `g(_, _, 3)(1)(2)`\n *   - `g(_, _, 3)(1, 2)`\n *   - `g(_, 2)(1)(3)`\n *   - `g(_, 2)(1, 3)`\n *   - `g(_, 2)(_, 3)(1)`\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Function\n * @sig (* -> a) -> (* -> a)\n * @param {Function} fn The function to curry.\n * @return {Function} A new, curried function.\n * @see R.curryN, R.partial\n * @example\n *\n *      const addFourNumbers = (a, b, c, d) => a + b + c + d;\n *\n *      const curriedAddFourNumbers = R.curry(addFourNumbers);\n *      const f = curriedAddFourNumbers(1, 2);\n *      const g = f(3);\n *      g(4); //=> 10\n */\nvar curry = /*#__PURE__*/_curry1(function curry(fn) {\n  return curryN(fn.length, fn);\n});\nexport default curry;","/**\n * A special placeholder value used to specify \"gaps\" within curried functions,\n * allowing partial application of any combination of arguments, regardless of\n * their positions.\n *\n * If `g` is a curried ternary function and `_` is `R.__`, the following are\n * equivalent:\n *\n *   - `g(1, 2, 3)`\n *   - `g(_, 2, 3)(1)`\n *   - `g(_, _, 3)(1)(2)`\n *   - `g(_, _, 3)(1, 2)`\n *   - `g(_, 2, _)(1, 3)`\n *   - `g(_, 2)(1)(3)`\n *   - `g(_, 2)(1, 3)`\n *   - `g(_, 2)(_, 3)(1)`\n *\n * @name __\n * @constant\n * @memberOf R\n * @since v0.6.0\n * @category Function\n * @example\n *\n *      const greet = R.replace('{name}', R.__, 'Hello, {name}!');\n *      greet('Alice'); //=> 'Hello, Alice!'\n */\nexport default { '@@functional/placeholder': true };","import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nimport { curry, __ as placeholder } from 'ramda';\n\nfunction forOwn(obj, fn) {\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      fn(obj[key], key);\n    }\n  }\n}\n\nfunction isArrayLike(value) {\n  return value && _typeof(value) === 'object' && typeof value.length === 'number' && value.length >= 0 && value.length % 1 === 0;\n}\n\nvar OWNER_ID_TAG = '@@_______immutableOpsOwnerID';\n\nfunction fastArrayCopy(arr) {\n  var copied = new Array(arr.length);\n\n  for (var i = 0; i < arr.length; i++) {\n    copied[i] = arr[i];\n  }\n\n  return copied;\n}\n\nexport function canMutate(obj, ownerID) {\n  if (!ownerID) return false;\n  return obj[OWNER_ID_TAG] === ownerID;\n}\nvar newOwnerID = typeof Symbol === 'function' ? function () {\n  return Symbol('ownerID');\n} : function () {\n  return {};\n};\nexport var getBatchToken = newOwnerID;\n\nfunction addOwnerID(obj, ownerID) {\n  Object.defineProperty(obj, OWNER_ID_TAG, {\n    value: ownerID,\n    configurable: true,\n    enumerable: false\n  });\n  return obj;\n}\n\nfunction prepareNewObject(instance, ownerID) {\n  if (ownerID) {\n    addOwnerID(instance, ownerID);\n  }\n\n  return instance;\n}\n\nfunction forceArray(arg) {\n  if (!(arg instanceof Array)) {\n    return [arg];\n  }\n\n  return arg;\n}\n\nvar PATH_SEPARATOR = '.';\n\nfunction normalizePath(pathArg) {\n  if (typeof pathArg === 'string') {\n    if (pathArg.indexOf(PATH_SEPARATOR) === -1) {\n      return [pathArg];\n    }\n\n    return pathArg.split(PATH_SEPARATOR);\n  }\n\n  return pathArg;\n}\n\nfunction mutableSet(key, value, obj) {\n  obj[key] = value;\n  return obj;\n}\n\nfunction mutableSetIn(_pathArg, value, obj) {\n  var originalPathArg = normalizePath(_pathArg);\n  var pathLen = originalPathArg.length;\n  var done = false;\n  var idx = 0;\n  var acc = obj;\n  var curr = originalPathArg[idx];\n\n  while (!done) {\n    if (idx === pathLen - 1) {\n      acc[curr] = value;\n      done = true;\n    } else {\n      var currType = _typeof(acc[curr]);\n\n      if (currType === 'undefined') {\n        var newObj = {};\n        prepareNewObject(newObj, null);\n        acc[curr] = newObj;\n      } else if (currType !== 'object') {\n        var pathRepr = \"\".concat(originalPathArg[idx - 1], \".\").concat(curr);\n        throw new Error(\"A non-object value was encountered when traversing setIn path at \".concat(pathRepr, \".\"));\n      }\n\n      acc = acc[curr];\n      idx++;\n      curr = originalPathArg[idx];\n    }\n  }\n\n  return obj;\n}\n\nfunction valueInPath(_pathArg, obj) {\n  var pathArg = normalizePath(_pathArg);\n  var acc = obj;\n\n  for (var i = 0; i < pathArg.length; i++) {\n    var curr = pathArg[i];\n    var currRef = acc[curr];\n\n    if (i === pathArg.length - 1) {\n      return currRef;\n    }\n\n    if (_typeof(currRef) === 'object') {\n      acc = currRef;\n    } else {\n      return undefined;\n    }\n  }\n\n  return undefined;\n}\n\nfunction immutableSetIn(ownerID, _pathArg, value, obj) {\n  var pathArg = normalizePath(_pathArg);\n  var currentValue = valueInPath(pathArg, obj);\n  if (value === currentValue) return obj;\n  var pathLen = pathArg.length;\n  var acc;\n\n  if (canMutate(obj, ownerID)) {\n    acc = obj;\n  } else {\n    acc = Object.assign(prepareNewObject({}, ownerID), obj);\n  }\n\n  var rootObj = acc;\n  pathArg.forEach(function (curr, idx) {\n    if (idx === pathLen - 1) {\n      acc[curr] = value;\n      return;\n    }\n\n    var currRef = acc[curr];\n\n    var currType = _typeof(currRef);\n\n    if (currType === 'object') {\n      if (canMutate(currRef, ownerID)) {\n        acc = currRef;\n      } else {\n        var newObj = prepareNewObject({}, ownerID);\n        acc[curr] = Object.assign(newObj, currRef);\n        acc = newObj;\n      }\n\n      return;\n    }\n\n    if (currType === 'undefined') {\n      var _newObj = prepareNewObject({}, ownerID);\n\n      acc[curr] = _newObj;\n      acc = _newObj;\n      return;\n    }\n\n    var pathRepr = \"\".concat(pathArg[idx - 1], \".\").concat(curr);\n    throw new Error(\"A non-object value was encountered when traversing setIn path at \".concat(pathRepr, \".\"));\n  });\n  return rootObj;\n}\n\nfunction mutableMerge(isDeep, _mergeObjs, baseObj) {\n  var mergeObjs = forceArray(_mergeObjs);\n\n  if (isDeep) {\n    mergeObjs.forEach(function (mergeObj) {\n      forOwn(mergeObj, function (value, key) {\n        if (isDeep && baseObj.hasOwnProperty(key)) {\n          var assignValue;\n\n          if (_typeof(value) === 'object') {\n            assignValue = mutableMerge(isDeep, [value], baseObj[key]);\n          } else {\n            assignValue = value;\n          }\n\n          baseObj[key] = assignValue;\n        } else {\n          baseObj[key] = value;\n        }\n      });\n    });\n  } else {\n    Object.assign.apply(Object, [baseObj].concat(_toConsumableArray(mergeObjs)));\n  }\n\n  return baseObj;\n}\n\nvar mutableShallowMerge = mutableMerge.bind(null, false);\nvar mutableDeepMerge = mutableMerge.bind(null, true);\n\nfunction mutableOmit(_keys, obj) {\n  var keys = forceArray(_keys);\n  keys.forEach(function (key) {\n    delete obj[key];\n  });\n  return obj;\n}\n\nfunction shouldMergeKey(obj, other, key) {\n  return obj[key] !== other[key];\n}\n\nfunction immutableMerge(isDeep, ownerID, _mergeObjs, obj) {\n  if (canMutate(obj, ownerID)) return mutableMerge(isDeep, _mergeObjs, obj);\n  var mergeObjs = forceArray(_mergeObjs);\n  var hasChanges = false;\n  var nextObject = obj;\n\n  var willChange = function willChange() {\n    if (!hasChanges) {\n      hasChanges = true;\n      nextObject = Object.assign({}, obj);\n      prepareNewObject(nextObject, ownerID);\n    }\n  };\n\n  mergeObjs.forEach(function (mergeObj) {\n    forOwn(mergeObj, function (mergeValue, key) {\n      if (isDeep && obj.hasOwnProperty(key)) {\n        var currentValue = nextObject[key];\n\n        if (_typeof(mergeValue) === 'object' && !(mergeValue instanceof Array)) {\n          if (shouldMergeKey(nextObject, mergeObj, key)) {\n            var recursiveMergeResult = immutableMerge(isDeep, ownerID, mergeValue, currentValue);\n\n            if (recursiveMergeResult !== currentValue) {\n              willChange();\n              nextObject[key] = recursiveMergeResult;\n            }\n          }\n\n          return true; // continue forOwn\n        }\n      }\n\n      if (shouldMergeKey(nextObject, mergeObj, key)) {\n        willChange();\n        nextObject[key] = mergeValue;\n      }\n\n      return undefined;\n    });\n  });\n  return nextObject;\n}\n\nvar immutableDeepMerge = immutableMerge.bind(null, true);\nvar immutableShallowMerge = immutableMerge.bind(null, false);\n\nfunction immutableArrSet(ownerID, index, value, arr) {\n  if (canMutate(arr, ownerID)) return mutableSet(index, value, arr);\n  if (arr[index] === value) return arr;\n  var newArr = fastArrayCopy(arr);\n  newArr[index] = value;\n  prepareNewObject(newArr, ownerID);\n  return newArr;\n}\n\nfunction immutableSet(ownerID, key, value, obj) {\n  if (isArrayLike(obj)) return immutableArrSet(ownerID, key, value, obj);\n  if (canMutate(obj, ownerID)) return mutableSet(key, value, obj);\n  if (obj[key] === value) return obj;\n  var newObj = Object.assign({}, obj);\n  prepareNewObject(newObj, ownerID);\n  newObj[key] = value;\n  return newObj;\n}\n\nfunction immutableOmit(ownerID, _keys, obj) {\n  if (canMutate(obj, ownerID)) return mutableOmit(_keys, obj);\n  var keys = forceArray(_keys);\n  var keysInObj = keys.filter(function (key) {\n    return obj.hasOwnProperty(key);\n  }); // None of the keys were in the object, so we can return `obj`.\n\n  if (keysInObj.length === 0) return obj;\n  var newObj = Object.assign({}, obj);\n  keysInObj.forEach(function (key) {\n    delete newObj[key];\n  });\n  prepareNewObject(newObj, ownerID);\n  return newObj;\n}\n\nfunction mutableArrPush(_vals, arr) {\n  var vals = forceArray(_vals);\n  arr.push.apply(arr, _toConsumableArray(vals));\n  return arr;\n}\n\nfunction mutableArrFilter(func, arr) {\n  var currIndex = 0;\n  var originalIndex = 0;\n\n  while (currIndex < arr.length) {\n    var item = arr[currIndex];\n\n    if (!func(item, originalIndex)) {\n      arr.splice(currIndex, 1);\n    } else {\n      currIndex++;\n    }\n\n    originalIndex++;\n  }\n\n  return arr;\n}\n\nfunction mutableArrSplice(index, deleteCount, _vals, arr) {\n  var vals = forceArray(_vals);\n  arr.splice.apply(arr, [index, deleteCount].concat(_toConsumableArray(vals)));\n  return arr;\n}\n\nfunction mutableArrInsert(index, _vals, arr) {\n  return mutableArrSplice(index, 0, _vals, arr);\n}\n\nfunction immutableArrSplice(ownerID, index, deleteCount, _vals, arr) {\n  if (canMutate(arr, ownerID)) return mutableArrSplice(index, deleteCount, _vals, arr);\n  var vals = forceArray(_vals);\n  var newArr = arr.slice();\n  prepareNewObject(newArr, ownerID);\n  newArr.splice.apply(newArr, [index, deleteCount].concat(_toConsumableArray(vals)));\n  return newArr;\n}\n\nfunction immutableArrInsert(ownerID, index, _vals, arr) {\n  if (canMutate(arr, ownerID)) return mutableArrInsert(index, _vals, arr);\n  return immutableArrSplice(ownerID, index, 0, _vals, arr);\n}\n\nfunction immutableArrPush(ownerID, vals, arr) {\n  return immutableArrInsert(ownerID, arr.length, vals, arr);\n}\n\nfunction immutableArrFilter(ownerID, func, arr) {\n  if (canMutate(arr, ownerID)) return mutableArrFilter(func, arr);\n  var newArr = arr.filter(func);\n  if (newArr.length === arr.length) return arr;\n  prepareNewObject(newArr, ownerID);\n  return newArr;\n}\n\nvar immutableOperations = {\n  // object operations\n  merge: immutableShallowMerge,\n  deepMerge: immutableDeepMerge,\n  omit: immutableOmit,\n  setIn: immutableSetIn,\n  // array operations\n  insert: immutableArrInsert,\n  push: immutableArrPush,\n  filter: immutableArrFilter,\n  splice: immutableArrSplice,\n  // both\n  set: immutableSet\n};\nvar mutableOperations = {\n  // object operations\n  merge: mutableShallowMerge,\n  deepMerge: mutableDeepMerge,\n  omit: mutableOmit,\n  setIn: mutableSetIn,\n  // array operations\n  insert: mutableArrInsert,\n  push: mutableArrPush,\n  filter: mutableArrFilter,\n  splice: mutableArrSplice,\n  // both\n  set: mutableSet\n};\nexport function getImmutableOps() {\n  var immutableOps = Object.assign({}, immutableOperations);\n  forOwn(immutableOps, function (value, key) {\n    immutableOps[key] = curry(value.bind(null, null));\n  });\n  var mutableOps = Object.assign({}, mutableOperations);\n  forOwn(mutableOps, function (value, key) {\n    mutableOps[key] = curry(value);\n  });\n  var batchOps = Object.assign({}, immutableOperations);\n  forOwn(batchOps, function (value, key) {\n    batchOps[key] = curry(value);\n  });\n\n  function batched(_token, _fn) {\n    var token;\n    var fn;\n\n    if (typeof _token === 'function') {\n      fn = _token;\n      token = getBatchToken();\n    } else {\n      token = _token;\n      fn = _fn;\n    }\n\n    var immutableOpsBoundToToken = Object.assign({}, immutableOperations);\n    forOwn(immutableOpsBoundToToken, function (value, key) {\n      immutableOpsBoundToToken[key] = curry(value.bind(null, token));\n    });\n    return fn(immutableOpsBoundToToken);\n  }\n\n  return Object.assign(immutableOps, {\n    mutable: mutableOps,\n    batch: batchOps,\n    batched: batched,\n    __: placeholder,\n    getBatchToken: getBatchToken\n  });\n}\nexport var ops = getImmutableOps();\nexport default ops;","export const UPDATE = \"REDUX_ORM_UPDATE\";\nexport const DELETE = \"REDUX_ORM_DELETE\";\nexport const CREATE = \"REDUX_ORM_CREATE\";\n\nexport const FILTER = \"REDUX_ORM_FILTER\";\nexport const EXCLUDE = \"REDUX_ORM_EXCLUDE\";\nexport const ORDER_BY = \"REDUX_ORM_ORDER_BY\";\n\nexport const SUCCESS = \"SUCCESS\";\nexport const FAILURE = \"FAILURE\";\n\n// for detecting ORM state objects\nexport const STATE_FLAG = \"@@_______REDUX_ORM_STATE_FLAG\";\n\n// for caching selectors based on their ID argument\nexport const ALL_INSTANCES = Symbol(\"REDUX_ORM_ALL_INSTANCES\");\nexport const ID_ARG_KEY_SELECTOR = (_state, idArg) =>\n    typeof idArg === \"undefined\" ? ALL_INSTANCES : idArg;\n","import ops from \"immutable-ops\";\nimport { FILTER, EXCLUDE } from \"./constants\";\n\n/**\n * @module utils\n * @private\n */\n\n/** @private */\nfunction warnDeprecated(msg) {\n    const logger =\n        typeof console.warn === \"function\"\n            ? console.warn.bind(console)\n            : console.log.bind(console);\n    return logger(msg);\n}\n\n/** @private */\nfunction capitalize(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\n/**\n * Returns the branch name for a many-to-many relation.\n * The name is the combination of the model name and the field name the relation\n * was declared. The field name's first letter is capitalized.\n *\n * Example: model `Author` has a many-to-many relation to the model `Book`, defined\n * in the `Author` field `books`. The many-to-many branch name will be `AuthorBooks`.\n *\n * @param  {string} declarationModelName - the name of the model the many-to-many relation was declared on\n * @param  {string} fieldName            - the field name where the many-to-many relation was declared on\n * @return {string} The branch name for the many-to-many relation.\n */\nfunction m2mName(declarationModelName, fieldName) {\n    return declarationModelName + capitalize(fieldName);\n}\n\n/**\n * Returns the fieldname that saves a foreign key to the\n * model id where the many-to-many relation was declared.\n *\n * Example: `Author` => `fromAuthorId`\n *\n * @param  {string} declarationModelName - the name of the model where the relation was declared\n * @return {string} the field name in the through model for `declarationModelName`'s foreign key.\n */\nfunction m2mFromFieldName(declarationModelName) {\n    return `from${declarationModelName}Id`;\n}\n\n/**\n * Returns the fieldname that saves a foreign key in a many-to-many through model to the\n * model where the many-to-many relation was declared.\n *\n * Example: `Book` => `toBookId`\n *\n * @param  {string} otherModelName - the name of the model that was the target of the many-to-many\n *                                   declaration.\n * @return {string} the field name in the through model for `otherModelName`'s foreign key..\n */\nfunction m2mToFieldName(otherModelName) {\n    return `to${otherModelName}Id`;\n}\n\n/** */\nfunction reverseFieldName(modelName) {\n    return modelName.toLowerCase() + \"Set\"; // eslint-disable-line prefer-template\n}\n\n/** @private */\nfunction querySetDelegatorFactory(methodName) {\n    return function querySetDelegator(...args) {\n        return this.getQuerySet()[methodName](...args);\n    };\n}\n\n/** @private */\nfunction querySetGetterDelegatorFactory(getterName) {\n    return function querySetGetterDelegator() {\n        const qs = this.getQuerySet();\n        return qs[getterName];\n    };\n}\n\n/** @private */\nfunction forEachSuperClass(subClass, func) {\n    let currClass = subClass;\n    while (currClass !== Function.prototype) {\n        func(currClass);\n        currClass = Object.getPrototypeOf(currClass);\n    }\n}\n\n/** */\nfunction attachQuerySetMethods(modelClass, querySetClass) {\n    const leftToDefine = querySetClass.sharedMethods.slice();\n\n    // There is no way to get a property descriptor for the whole prototype chain;\n    // only from an objects own properties. Therefore we traverse the whole prototype\n    // chain for querySet.\n    forEachSuperClass(querySetClass, cls => {\n        for (let i = 0; i < leftToDefine.length; i++) {\n            let defined = false;\n            const methodName = leftToDefine[i];\n            const descriptor = Object.getOwnPropertyDescriptor(\n                cls.prototype,\n                methodName\n            );\n            if (typeof descriptor !== \"undefined\") {\n                if (typeof descriptor.get !== \"undefined\") {\n                    descriptor.get = querySetGetterDelegatorFactory(methodName);\n                    Object.defineProperty(modelClass, methodName, descriptor);\n                } else {\n                    modelClass[methodName] = querySetDelegatorFactory(\n                        methodName\n                    );\n                }\n                defined = true;\n            }\n            if (defined) {\n                leftToDefine.splice(i--, 1);\n            }\n        }\n    });\n}\n\n/**\n * Normalizes `entity` to an id, where `entity` can be an id\n * or a Model instance.\n *\n * @param  {*} entity - either a Model instance or an id value\n * @return {*} the id value of `entity`\n */\nfunction normalizeEntity(entity) {\n    if (\n        entity !== null &&\n        typeof entity !== \"undefined\" &&\n        typeof entity.getId === \"function\"\n    ) {\n        return entity.getId();\n    }\n    return entity;\n}\n\n/** */\nfunction reverseFieldErrorMessage(\n    modelName,\n    fieldName,\n    toModelName,\n    backwardsFieldName\n) {\n    return [\n        `Reverse field ${backwardsFieldName} already defined`,\n        ` on model ${toModelName}. To fix, set a custom related`,\n        ` name on ${modelName}.${fieldName}.`,\n    ].join(\"\");\n}\n\n/**\n * Fastest way to check if two objects are equal.\n * Object and array values have to be referentially equal.\n */\nfunction objectShallowEquals(a, b) {\n    const entriesInA = Object.entries(Object(a));\n\n    if (entriesInA.length !== Object.keys(b).length) {\n        return false;\n    }\n\n    return entriesInA.every(\n        ([key, value]) => b.hasOwnProperty(key) && b[key] === value\n    );\n}\n\n/** */\nfunction arrayDiffActions(sourceArr, targetArr) {\n    const itemsInBoth = sourceArr.filter(item => targetArr.includes(item));\n    const deleteItems = sourceArr.filter(item => !itemsInBoth.includes(item));\n    const addItems = targetArr.filter(item => !itemsInBoth.includes(item));\n\n    if (deleteItems.length || addItems.length) {\n        return {\n            delete: deleteItems,\n            add: addItems,\n        };\n    }\n    return null;\n}\n\nconst { getBatchToken } = ops;\n\n/**\n * @return boolean\n */\nfunction clauseFiltersByAttribute({ type, payload }, attribute) {\n    if (type !== FILTER) return false;\n\n    if (typeof payload !== \"object\") {\n        /**\n         * payload could also be a function in which case\n         * we would have no way of knowing what it does,\n         * so we default to false for non-objects\n         */\n        return false;\n    }\n\n    if (!payload.hasOwnProperty(attribute)) return false;\n    const attributeValue = payload[attribute];\n    if (attributeValue === null) return false;\n    if (attributeValue === undefined) return false;\n\n    return true;\n}\n\n/**\n * @return boolean\n */\nfunction clauseReducesResultSetSize({ type }) {\n    return [FILTER, EXCLUDE].includes(type);\n}\n\n/**\n * @param {Object} object\n * @return Object\n */\nfunction mapValues(object, func) {\n    return Object.entries(object).reduce((newObject, [key, value]) => {\n        newObject[key] = func(value);\n        return newObject;\n    }, {});\n}\n\n/** */\nfunction normalizeModelReference(modelNameOrClass) {\n    if (!modelNameOrClass || typeof modelNameOrClass === \"string\") {\n        return modelNameOrClass;\n    }\n    return modelNameOrClass.modelName;\n}\n\nexport {\n    attachQuerySetMethods,\n    m2mName,\n    m2mFromFieldName,\n    m2mToFieldName,\n    reverseFieldName,\n    normalizeEntity,\n    reverseFieldErrorMessage,\n    objectShallowEquals,\n    ops,\n    arrayDiffActions,\n    getBatchToken,\n    clauseFiltersByAttribute,\n    clauseReducesResultSetSize,\n    warnDeprecated,\n    mapValues,\n    normalizeModelReference,\n};\n","import { normalizeEntity, warnDeprecated, mapValues } from \"./utils\";\n\nimport { UPDATE, DELETE, FILTER, EXCLUDE, ORDER_BY } from \"./constants\";\n\n/**\n * This class is used to build and make queries to the database\n * and operating the resulting set (such as updating attributes\n * or deleting the records).\n *\n * The queries are built lazily. For example:\n *\n * ```javascript\n * const qs = Book.all()\n *     .filter(book => book.releaseYear > 1999)\n *     .orderBy('name');\n * ```\n *\n * Doesn't execute a query. The query is executed only when\n * you need information from the query result, such as {@link QuerySet#count},\n * {@link QuerySet#toRefArray}. After the query is executed, the resulting\n * set is cached in the QuerySet instance.\n *\n * QuerySet instances also return copies, so chaining filters doesn't\n * mutate the previous instances.\n */\nconst QuerySet = class QuerySet {\n    /**\n     * Creates a QuerySet. The constructor is mainly for internal use;\n     * You should access QuerySet instances from {@link Model}.\n     *\n     * @param  {Model} modelClass - the model class of objects in this QuerySet.\n     * @param  {any[]} clauses - query clauses needed to evaluate the set.\n     * @param {Object} [opts] - additional options\n     */\n    constructor(modelClass, clauses, opts) {\n        Object.assign(this, {\n            modelClass,\n            clauses: clauses || [],\n        });\n\n        this._opts = opts;\n    }\n\n    static addSharedMethod(methodName) {\n        this.sharedMethods = this.sharedMethods.concat(methodName);\n    }\n\n    _new(clauses, userOpts) {\n        const opts = { ...this._opts, ...userOpts };\n        return new this.constructor(this.modelClass, clauses, opts);\n    }\n\n    toString() {\n        this._evaluate();\n        const contents = this.rows\n            .map(({ id }) => this.modelClass.withId(id).toString())\n            .join(\"\\n    - \");\n        return `QuerySet contents:\\n    - ${contents}`;\n    }\n\n    /**\n     * Returns an array of the plain objects represented by the QuerySet.\n     * The plain objects are direct references to the store.\n     *\n     * @return {Object[]} references to the plain JS objects represented by\n     *                    the QuerySet\n     */\n    toRefArray() {\n        return this._evaluate();\n    }\n\n    /**\n     * Returns an array of {@link Model} instances represented by the QuerySet.\n     * @return {Model[]} model instances represented by the QuerySet\n     */\n    toModelArray() {\n        const { modelClass: ModelClass } = this;\n        return this._evaluate().map(props => new ModelClass(props));\n    }\n\n    /**\n     * Returns the number of {@link Model} instances represented by the QuerySet.\n     *\n     * @return {number} length of the QuerySet\n     */\n    count() {\n        this._evaluate();\n        return this.rows.length;\n    }\n\n    /**\n     * Checks if the {@link QuerySet} instance has any records matching the query\n     * in the database.\n     *\n     * @return {Boolean} `true` if the {@link QuerySet} instance contains entities, else `false`.\n     */\n    exists() {\n        return Boolean(this.count());\n    }\n\n    /**\n     * Returns the {@link Model} instance at index `index` in the {@link QuerySet} instance if\n     * `withRefs` flag is set to `false`, or a reference to the plain JavaScript\n     * object in the model state if `true`.\n     *\n     * @param  {number} index - index of the model instance to get\n     * @return {Model|undefined} a {@link Model} instance at index\n     *                           `index` in the {@link QuerySet} instance,\n     *                           or undefined if the index is out of bounds.\n     */\n    at(index) {\n        const { modelClass: ModelClass } = this;\n\n        const rows = this._evaluate();\n        if (index >= 0 && index < rows.length) {\n            return new ModelClass(rows[index]);\n        }\n\n        return undefined;\n    }\n\n    /**\n     * Returns the {@link Model} instance at index 0 in the {@link QuerySet} instance.\n     * @return {Model}\n     */\n    first() {\n        return this.at(0);\n    }\n\n    /**\n     * Returns the {@link Model} instance at index `QuerySet.count() - 1`\n     * @return {Model}\n     */\n    last() {\n        const rows = this._evaluate();\n        return this.at(rows.length - 1);\n    }\n\n    /**\n     * Returns a new {@link QuerySet} instance with the same entities.\n     * @return {QuerySet} a new QuerySet with the same entities.\n     */\n    all() {\n        return this._new(this.clauses);\n    }\n\n    /**\n     * Returns a new {@link QuerySet} instance with entities that match properties in `lookupObj`.\n     *\n     * @param  {Object} lookupObj - the properties to match objects with. Can also be a function.\n     *                              It works the same as [Lodash filter](https://lodash.com/docs/#filter).\n     * @return {QuerySet} a new {@link QuerySet} instance with objects that passed the filter.\n     */\n    filter(lookupObj) {\n        /**\n         * allow foreign keys to be specified as model instances,\n         * transform model instances to their primary keys\n         */\n        const normalizedLookupObj =\n            typeof lookupObj === \"object\"\n                ? mapValues(lookupObj, normalizeEntity)\n                : lookupObj;\n\n        const filterDescriptor = {\n            type: FILTER,\n            payload: normalizedLookupObj,\n        };\n        /**\n         * create a new QuerySet\n         * including only rows matching the lookupObj\n         */\n        return this._new(this.clauses.concat(filterDescriptor));\n    }\n\n    /**\n     * Returns a new {@link QuerySet} instance with entities that do not match\n     * properties in `lookupObj`.\n     *\n     * @param  {Object} lookupObj - the properties to unmatch objects with. Can also be a function.\n     *                              It works the same as [Lodash reject](https://lodash.com/docs/#reject).\n     * @return {QuerySet} a new {@link QuerySet} instance with objects that did not pass the filter.\n     */\n    exclude(lookupObj) {\n        /**\n         * allow foreign keys to be specified as model instances,\n         * transform model instances to their primary keys\n         */\n        const normalizedLookupObj =\n            typeof lookupObj === \"object\"\n                ? mapValues(lookupObj, normalizeEntity)\n                : lookupObj;\n        const excludeDescriptor = {\n            type: EXCLUDE,\n            payload: normalizedLookupObj,\n        };\n\n        /**\n         * create a new QuerySet\n         * excluding all rows matching the lookupObj\n         */\n        return this._new(this.clauses.concat(excludeDescriptor));\n    }\n\n    /**\n     * Performs the actual database query.\n     * @private\n     * @return {Array} rows corresponding to the QuerySet's clauses\n     */\n    _evaluate() {\n        if (typeof this.modelClass.session === \"undefined\") {\n            throw new Error(\n                [\n                    `Tried to query the ${this.modelClass.modelName} model's table without a session. `,\n                    \"Create a session using `session = orm.session()` and use \",\n                    `\\`session[\"${this.modelClass.modelName}\"]\\` for querying instead.`,\n                ].join(\"\")\n            );\n        }\n        if (!this._evaluated) {\n            const { session, modelName: table } = this.modelClass;\n            const querySpec = {\n                table,\n                clauses: this.clauses,\n            };\n            this.rows = session.query(querySpec).rows;\n            this._evaluated = true;\n        }\n        return this.rows;\n    }\n\n    /**\n     * Returns a new {@link QuerySet} instance with entities ordered by `iteratees` in ascending\n     * order, unless otherwise specified. Delegates to [Lodash orderBy](https://lodash.com/docs/#orderBy).\n     *\n     * @param  {string[]|Function[]} iteratees - an array where each item can be a string or a\n     *                                           function. If a string is supplied, it should\n     *                                           correspond to property on the entity that will\n     *                                           determine the order. If a function is supplied,\n     *                                           it should return the value to order by.\n     * @param {Array<Boolean|'asc'|'desc'>} [orders] - the sort orders of `iteratees`. If unspecified, all iteratees\n     *                               will be sorted in ascending order. `true` and `'asc'`\n     *                               correspond to ascending order, and `false` and `'desc'`\n     *                               to descending order.\n     * @return {QuerySet} a new {@link QuerySet} with objects ordered by `iteratees`.\n     */\n    orderBy(iteratees, orders) {\n        const orderByDescriptor = {\n            type: ORDER_BY,\n            payload: [iteratees, orders],\n        };\n\n        /**\n         * create a new QuerySet\n         * sorting all rows according to the passed arguments\n         */\n        return this._new(this.clauses.concat(orderByDescriptor));\n    }\n\n    /**\n     * Records an update specified with `mergeObj` to all the objects\n     * in the {@link QuerySet} instance.\n     *\n     * @param  {Object} mergeObj - an object to merge with all the objects in this\n     *                             queryset.\n     * @return {undefined}\n     */\n    update(mergeObj) {\n        const { session, modelName: table } = this.modelClass;\n\n        session.applyUpdate({\n            action: UPDATE,\n            query: {\n                table,\n                clauses: this.clauses,\n            },\n            payload: mergeObj,\n        });\n\n        this._evaluated = false;\n    }\n\n    /**\n     * Records a deletion of all the objects in this {@link QuerySet} instance.\n     * @return {undefined}\n     */\n    delete() {\n        const { session, modelName: table } = this.modelClass;\n\n        this.toModelArray().forEach(\n            model => model._onDelete() // eslint-disable-line no-underscore-dangle\n        );\n\n        session.applyUpdate({\n            action: DELETE,\n            query: {\n                table,\n                clauses: this.clauses,\n            },\n        });\n\n        this._evaluated = false;\n    }\n\n    // DEPRECATED AND REMOVED METHODS\n\n    /**\n     * @deprecated\n     * Use {@link QuerySet#toModelArray} or predicate functions that\n     * instantiate Models from refs, e.g. `new Model(ref)`.\n     */\n    get withModels() {\n        throw new Error(\n            \"`QuerySet.prototype.withModels` has been removed. \" +\n                \"Use `.toModelArray()` or predicate functions that \" +\n                \"instantiate Models from refs, e.g. `new Model(ref)`.\"\n        );\n    }\n\n    /**\n     * @deprecated Query building operates on refs only now.\n     */\n    get withRefs() {\n        warnDeprecated(\n            \"`QuerySet.prototype.withRefs` has been deprecated. \" +\n                \"Query building operates on refs only now.\"\n        );\n        return undefined;\n    }\n\n    /**\n     * @deprecated\n     * Call {@link QuerySet#toModelArray} or {@link QuerySet#toRefArray} first to map.\n     */\n    map() {\n        throw new Error(\n            \"`QuerySet.prototype.map` has been removed. \" +\n                \"Call `.toModelArray()` or `.toRefArray()` first to map.\"\n        );\n    }\n\n    /**\n     * @deprecated\n     * Call {@link QuerySet#toModelArray} or {@link QuerySet#toRefArray} first to iterate.\n     */\n    forEach() {\n        throw new Error(\n            \"`QuerySet.prototype.forEach` has been removed. \" +\n                \"Call `.toModelArray()` or `.toRefArray()` first to iterate.\"\n        );\n    }\n};\n\nQuerySet.sharedMethods = [\n    \"count\",\n    \"at\",\n    \"all\",\n    \"last\",\n    \"first\",\n    \"filter\",\n    \"exclude\",\n    \"orderBy\",\n    \"update\",\n    \"delete\",\n];\n\nexport default QuerySet;\n","import { getBatchToken } from \"immutable-ops\";\n\nimport { SUCCESS, UPDATE, DELETE } from \"./constants\";\nimport { warnDeprecated, clauseFiltersByAttribute } from \"./utils\";\n\nconst Session = class Session {\n    /**\n     * Creates a new Session.\n     *\n     * @param  {Database} db - a {@link Database} instance\n     * @param  {Object} state - the database state\n     * @param  {Boolean} [withMutations] - whether the session should mutate data\n     * @param  {Object} [batchToken] - used by the backend to identify objects that can be\n     *                                 mutated.\n     */\n    constructor(schema, db, state, withMutations, batchToken) {\n        this.schema = schema;\n        this.db = db;\n        this.state = state || db.getEmptyState();\n        this.initialState = this.state;\n\n        this.withMutations = Boolean(withMutations);\n        this.batchToken = batchToken || getBatchToken();\n\n        this.modelData = {};\n\n        this.models = schema.getModelClasses();\n\n        this.sessionBoundModels = this.models.map(modelClass => {\n            function SessionBoundModel() {\n                return Reflect.construct(\n                    modelClass,\n                    arguments,\n                    SessionBoundModel\n                ); // eslint-disable-line prefer-rest-params\n            }\n            Reflect.setPrototypeOf(\n                SessionBoundModel.prototype,\n                modelClass.prototype\n            );\n            Reflect.setPrototypeOf(SessionBoundModel, modelClass);\n\n            Object.defineProperty(this, modelClass.modelName, {\n                get: () => SessionBoundModel,\n            });\n\n            SessionBoundModel.connect(this);\n            return SessionBoundModel;\n        });\n    }\n\n    getDataForModel(modelName) {\n        if (!this.modelData[modelName]) {\n            this.modelData[modelName] = {};\n        }\n        return this.modelData[modelName];\n    }\n\n    getModelData() {\n        return this.modelData;\n    }\n\n    markAccessed(modelName, modelIds) {\n        const data = this.getDataForModel(modelName);\n        if (!data.accessedInstances) {\n            data.accessedInstances = {};\n        }\n        modelIds.forEach(id => {\n            data.accessedInstances[id] = true;\n        });\n    }\n\n    get accessedModelInstances() {\n        return Object.entries(this.getModelData()).reduce(\n            (result, [key, value]) => {\n                if (value.accessedInstances) {\n                    result[key] = value.accessedInstances;\n                }\n                return result;\n            },\n            {}\n        );\n    }\n\n    markFullTableScanned(modelName) {\n        const data = this.getDataForModel(modelName);\n        data.fullTableScanned = true;\n    }\n\n    get fullTableScannedModels() {\n        return Object.entries(this.getModelData()).reduce(\n            (result, [key, value]) => {\n                if (value.fullTableScanned) {\n                    result.push(key);\n                }\n                return result;\n            },\n            []\n        );\n    }\n\n    markAccessedIndexes(indexes) {\n        indexes.forEach(([table, attr, value]) => {\n            const data = this.getDataForModel(table);\n            if (!data.accessedIndexes) {\n                data.accessedIndexes = {};\n            }\n            data.accessedIndexes[attr] = [\n                ...(data.accessedIndexes[attr] || []),\n                value,\n            ];\n        });\n    }\n\n    get accessedIndexes() {\n        return Object.entries(this.getModelData()).reduce(\n            (result, [key, value]) => {\n                if (value.accessedIndexes) {\n                    result[key] = value.accessedIndexes;\n                }\n                return result;\n            },\n            {}\n        );\n    }\n\n    /**\n     * Applies update to a model state.\n     *\n     * @private\n     * @param {Object} update - the update object. Must have keys\n     *                          `type`, `payload`.\n     */\n    applyUpdate(updateSpec) {\n        const tx = this._getTransaction(updateSpec);\n        const result = this.db.update(updateSpec, tx, this.state);\n        const { status, state, payload } = result;\n\n        if (status !== SUCCESS) {\n            throw new Error(\n                `Applying update failed with status ${status}. Payload: ${payload}`\n            );\n        }\n\n        this.state = state;\n\n        return payload;\n    }\n\n    query(querySpec) {\n        const result = this.db.query(querySpec, this.state);\n\n        this._markAccessedByQuery(querySpec, result);\n\n        return result;\n    }\n\n    _getTransaction(updateSpec) {\n        const { withMutations } = this;\n        const { action } = updateSpec;\n        let { batchToken } = this;\n        if ([UPDATE, DELETE].includes(action)) {\n            batchToken = getBatchToken();\n        }\n        return { batchToken, withMutations };\n    }\n\n    _markAccessedByQuery(querySpec, result) {\n        const { table, clauses } = querySpec;\n        const { rows } = result;\n\n        const { idAttribute } = this[table];\n        const accessedIds = new Set(rows.map(row => row[idAttribute]));\n\n        const anyClauseFilteredByPk = clauses.some(clause => {\n            if (!clauseFiltersByAttribute(clause, idAttribute)) {\n                return false;\n            }\n            /**\n             * We previously knew which row we wanted to access,\n             * so there was no need to scan the entire table.\n             */\n            accessedIds.add(clause.payload[idAttribute]);\n            return true;\n        });\n\n        const accessedIndexes = [];\n        const { indexes } = this.state[table];\n        clauses.forEach(clause => {\n            Object.keys(indexes).forEach(attr => {\n                if (!clauseFiltersByAttribute(clause, attr)) {\n                    return;\n                }\n                const value = clause.payload[attr];\n                accessedIndexes.push([table, attr, value]);\n            });\n        });\n\n        if (anyClauseFilteredByPk) {\n            /**\n             * The clauses have been ordered so that an indexed one was\n             * the first to have been evaluated, and thus only the row\n             * with the specified PK value has actually been accessed.\n             */\n            this.markAccessed(table, accessedIds);\n        } else if (accessedIndexes.length) {\n            /**\n             * At least one clause was optimized using indexes.\n             */\n            this.markAccessed(table, accessedIds);\n            this.markAccessedIndexes(accessedIndexes);\n        } else {\n            /**\n             * At least one clause could not be efficiently optimized\n             * or no clause was specified at all.\n             */\n            this.markFullTableScanned(table);\n        }\n    }\n\n    // DEPRECATED AND REMOVED METHODS\n\n    /**\n     * @deprecated Access {@link Session#state} instead.\n     */\n    getNextState() {\n        warnDeprecated(\n            \"`Session.prototype.getNextState` has been deprecated. Access \" +\n                \"the `Session.prototype.state` property instead.\"\n        );\n        return this.state;\n    }\n\n    /**\n     * @deprecated\n     * The Redux integration API is now decoupled from ORM and Session.<br>\n     * See the 0.9 migration guide in the GitHub repo.\n     */\n    reduce() {\n        throw new Error(\n            \"`Session.prototype.reduce` has been removed. The Redux integration API \" +\n                \"is now decoupled from ORM and Session - see the 0.9 migration guide \" +\n                \"in the GitHub repo.\"\n        );\n    }\n};\n\nexport default Session;\n","import FieldInstallerTemplate from \"./FieldInstallerTemplate\";\n\nimport { reverseFieldErrorMessage } from \"../utils\";\n\n/**\n * Default implementation for the template method in FieldInstallerTemplate.\n * @private\n * @memberof module:fields\n */\nexport class DefaultFieldInstaller extends FieldInstallerTemplate {\n    installForwardsDescriptor() {\n        Object.defineProperty(\n            this.model.prototype,\n            this.fieldName,\n            this.field.createForwardsDescriptor(\n                this.fieldName,\n                this.model,\n                this.toModel,\n                this.throughModel\n            )\n        );\n    }\n\n    installForwardsVirtualField() {\n        this.model.virtualFields[\n            this.fieldName\n        ] = this.field.createForwardsVirtualField(\n            this.fieldName,\n            this.model,\n            this.toModel,\n            this.throughModel\n        );\n    }\n\n    installBackwardsDescriptor() {\n        const backwardsDescriptor = Object.getOwnPropertyDescriptor(\n            this.toModel.prototype,\n            this.backwardsFieldName\n        );\n        if (backwardsDescriptor) {\n            throw new Error(\n                reverseFieldErrorMessage(\n                    this.model.modelName,\n                    this.fieldName,\n                    this.toModel.modelName,\n                    this.backwardsFieldName\n                )\n            );\n        }\n\n        // install backwards descriptor\n        Object.defineProperty(\n            this.toModel.prototype,\n            this.backwardsFieldName,\n            this.field.createBackwardsDescriptor(\n                this.fieldName,\n                this.model,\n                this.toModel,\n                this.throughModel\n            )\n        );\n    }\n\n    installBackwardsVirtualField() {\n        this.toModel.virtualFields[\n            this.backwardsFieldName\n        ] = this.field.createBackwardsVirtualField(\n            this.fieldName,\n            this.model,\n            this.toModel,\n            this.throughModel\n        );\n    }\n}\n\nexport default DefaultFieldInstaller;\n","/**\n * Defines algorithm for installing a field onto a model and related models.\n * Conforms to the template method behavioral design pattern.\n * @private\n * @memberof module:fields\n */\nexport class FieldInstallerTemplate {\n    constructor(opts) {\n        this.field = opts.field;\n        this.fieldName = opts.fieldName;\n        this.model = opts.model;\n        this.orm = opts.orm;\n        /**\n         * the field itself has no knowledge of the model\n         * it is being installed upon; we need to inform it\n         * that it is a self-referencing field for the field\n         * to be able to make better informed decisions\n         */\n        if (this.field.references(this.model)) {\n            this.field.toModelName = \"this\";\n        }\n    }\n\n    get toModel() {\n        if (typeof this._toModel === \"undefined\") {\n            const { toModelName } = this.field;\n            if (!toModelName) {\n                this._toModel = null;\n            } else if (toModelName === \"this\") {\n                this._toModel = this.model;\n            } else {\n                this._toModel = this.orm.get(toModelName);\n            }\n        }\n        return this._toModel;\n    }\n\n    get throughModel() {\n        if (typeof this._throughModel === \"undefined\") {\n            const throughModelName = this.field.getThroughModelName(\n                this.fieldName,\n                this.model\n            );\n            if (!throughModelName) {\n                this._throughModel = null;\n            } else {\n                this._throughModel = this.orm.get(throughModelName);\n            }\n        }\n        return this._throughModel;\n    }\n\n    get backwardsFieldName() {\n        return this.field.getBackwardsFieldName(this.model);\n    }\n\n    run() {\n        this.installForwardsDescriptor();\n        if (this.field.installsForwardsVirtualField) {\n            this.installForwardsVirtualField();\n        }\n        /**\n         * Install a backwards field on a model as a consequence\n         * of having installed the forwards field on another model.\n         */\n        if (this.field.installsBackwardsDescriptor) {\n            this.installBackwardsDescriptor();\n        }\n        if (this.field.installsBackwardsVirtualField) {\n            this.installBackwardsVirtualField();\n        }\n    }\n}\n\nexport default FieldInstallerTemplate;\n","import DefaultFieldInstaller from \"./DefaultFieldInstaller\";\n\n/**\n * @private\n * @memberof module:fields\n */\nexport class Field {\n    get installerClass() {\n        return DefaultFieldInstaller;\n    }\n\n    getClass() {\n        return this.constructor;\n    }\n\n    references(model) {\n        return false;\n    }\n\n    getThroughModelName(fieldName, model) {\n        return null;\n    }\n\n    get installsForwardsVirtualField() {\n        return false;\n    }\n\n    get installsBackwardsDescriptor() {\n        return false;\n    }\n\n    get installsBackwardsVirtualField() {\n        return false;\n    }\n\n    get index() {\n        return false;\n    }\n}\n\nexport default Field;\n","import { normalizeEntity } from \"./utils\";\n\n/**\n * The functions in this file return custom JS property descriptors\n * that are supposed to be assigned to Model fields.\n *\n * Some include the logic to look up models using foreign keys and\n * to add or remove relationships between models.\n *\n * @module descriptors\n * @private\n */\n\n/**\n * Defines a basic non-key attribute.\n * @param  {string} fieldName - the name of the field the descriptor will be assigned to.\n */\nfunction attrDescriptor(fieldName) {\n    return {\n        get() {\n            return this._fields[fieldName];\n        },\n\n        set(value) {\n            return this.set(fieldName, value);\n        },\n\n        enumerable: true,\n        configurable: true,\n    };\n}\n\n/**\n * Forwards direction of a Foreign Key: returns one object.\n * Also works as {@link .forwardsOneToOneDescriptor|forwardsOneToOneDescriptor}.\n *\n * For `book.author` referencing an `Author` model instance,\n * `fieldName` would be `'author'` and `declaredToModelName` would be `'Author'`.\n * @param  {string} fieldName - the name of the field the descriptor will be assigned to.\n * @param  {string} declaredToModelName - the name of the model that the field references.\n */\nfunction forwardsManyToOneDescriptor(fieldName, declaredToModelName) {\n    return {\n        get() {\n            const {\n                session: { [declaredToModelName]: DeclaredToModel },\n            } = this.getClass();\n            const { [fieldName]: toId } = this._fields;\n\n            return DeclaredToModel.withId(toId);\n        },\n        set(value) {\n            this.update({\n                [fieldName]: normalizeEntity(value),\n            });\n        },\n    };\n}\n\n/**\n * Dereferencing foreign keys in {@link module:fields.oneToOne|oneToOne}\n * relationships works the same way as in many-to-one relationships:\n * just look up the related model.\n *\n * For example, a human face tends to have a single nose.\n * So if we want to resolve `face.nose`, we need to\n * look up the `Nose` that has the primary key that `face` references.\n *\n * @see {@link module:descriptors~forwardsManyToOneDescriptor|forwardsManyToOneDescriptor}\n */\nfunction forwardsOneToOneDescriptor(...args) {\n    return forwardsManyToOneDescriptor(...args);\n}\n\n/**\n * Here we resolve 1-to-1 relationships starting at the model on which the\n * field was not installed. This means we need to find the instance of the\n * other model whose {@link module:fields.oneToOne|oneToOne} FK field contains the current model's primary key.\n *\n * @param  {string} declaredFieldName - the name of the field referencing the current model.\n * @param  {string} declaredFromModelName - the name of the other model.\n */\nfunction backwardsOneToOneDescriptor(declaredFieldName, declaredFromModelName) {\n    return {\n        get() {\n            const {\n                session: { [declaredFromModelName]: DeclaredFromModel },\n            } = this.getClass();\n\n            return DeclaredFromModel.get({\n                [declaredFieldName]: this.getId(),\n            });\n        },\n        set() {\n            throw new Error(\"Can't mutate a reverse one-to-one relation.\");\n        },\n    };\n}\n\n/**\n * The backwards direction of a n-to-1 relationship (i.e. 1-to-n),\n * meaning this will return an a collection (`QuerySet`) of model instances.\n *\n * An example would be `author.books` referencing all instances of\n * the `Book` model that reference the author using `fk()`.\n */\nfunction backwardsManyToOneDescriptor(\n    declaredFieldName,\n    declaredFromModelName\n) {\n    return {\n        get() {\n            const {\n                session: { [declaredFromModelName]: DeclaredFromModel },\n            } = this.getClass();\n\n            return DeclaredFromModel.filter({\n                [declaredFieldName]: this.getId(),\n            });\n        },\n        set() {\n            throw new Error(\"Can't mutate a reverse many-to-one relation.\");\n        },\n    };\n}\n\n/**\n * This descriptor is assigned to both sides of a many-to-many relationship.\n * To indicate the backwards direction pass `true` for `reverse`.\n */\nfunction manyToManyDescriptor(\n    declaredFromModelName,\n    declaredToModelName,\n    throughModelName,\n    throughFields,\n    reverse\n) {\n    return {\n        get() {\n            const {\n                session: {\n                    [declaredFromModelName]: DeclaredFromModel,\n                    [declaredToModelName]: DeclaredToModel,\n                    [throughModelName]: ThroughModel,\n                },\n            } = this.getClass();\n\n            const ThisModel = reverse ? DeclaredToModel : DeclaredFromModel;\n            const OtherModel = reverse ? DeclaredFromModel : DeclaredToModel;\n\n            const thisReferencingField = reverse\n                ? throughFields.to\n                : throughFields.from;\n            const otherReferencingField = reverse\n                ? throughFields.from\n                : throughFields.to;\n\n            const thisId = this.getId();\n\n            const throughQs = ThroughModel.filter({\n                [thisReferencingField]: thisId,\n            });\n\n            /**\n             * all IDs of instances of the other model that are\n             * referenced by any instance of the current model\n             */\n            const referencedOtherIds = new Set(\n                throughQs.toRefArray().map(obj => obj[otherReferencingField])\n            );\n\n            /**\n             * selects all instances of other model that are referenced\n             * by any instance of the current model\n             */\n            const qs = OtherModel.filter(otherModelInstance =>\n                referencedOtherIds.has(\n                    otherModelInstance[OtherModel.idAttribute]\n                )\n            );\n\n            /**\n             * Allows adding OtherModel instances to be referenced by the current instance.\n             *\n             * E.g. Book.first().authors.add(1, 2) would add the authors with IDs 1 and 2\n             * to the first book's list of referenced authors.\n             *\n             * @return undefined\n             */\n            qs.add = function add(...entities) {\n                const idsToAdd = new Set(entities.map(normalizeEntity));\n\n                const existingQs = throughQs.filter(through =>\n                    idsToAdd.has(through[otherReferencingField])\n                );\n\n                if (existingQs.exists()) {\n                    const existingIds = existingQs\n                        .toRefArray()\n                        .map(through => through[otherReferencingField]);\n\n                    throw new Error(\n                        `Tried to add already existing ${OtherModel.modelName} id(s) ${existingIds} to the ${ThisModel.modelName} instance with id ${thisId}`\n                    );\n                }\n\n                idsToAdd.forEach(id => {\n                    ThroughModel.create({\n                        [otherReferencingField]: id,\n                        [thisReferencingField]: thisId,\n                    });\n                });\n            };\n\n            /**\n             * Removes references to all OtherModel instances from the current model.\n             *\n             * E.g. Book.first().authors.clear() would cause the first book's list\n             * of referenced authors to become empty.\n             *\n             * @return undefined\n             */\n            qs.clear = function clear() {\n                throughQs.delete();\n            };\n\n            /**\n             * Removes references to all passed OtherModel instances from the current model.\n             *\n             * E.g. Book.first().authors.remove(1, 2) would cause the authors with\n             * IDs 1 and 2 to no longer be referenced by the first book.\n             *\n             * @return undefined\n             */\n            qs.remove = function remove(...entities) {\n                const idsToRemove = new Set(entities.map(normalizeEntity));\n\n                const entitiesToDelete = throughQs.filter(through =>\n                    idsToRemove.has(through[otherReferencingField])\n                );\n\n                if (entitiesToDelete.count() !== idsToRemove.size) {\n                    // Tried deleting non-existing entities.\n                    const entitiesToDeleteIds = entitiesToDelete\n                        .toRefArray()\n                        .map(through => through[otherReferencingField]);\n\n                    const unexistingIds = [...idsToRemove].filter(\n                        id => !entitiesToDeleteIds.includes(id)\n                    );\n\n                    throw new Error(\n                        `Tried to delete non-existing ${OtherModel.modelName} id(s) ${unexistingIds} from the ${ThisModel.modelName} instance with id ${thisId}`\n                    );\n                }\n\n                entitiesToDelete.delete();\n            };\n\n            return qs;\n        },\n\n        set() {\n            throw new Error(\n                \"Tried setting a M2M field. Please use the related QuerySet methods add, remove and clear.\"\n            );\n        },\n    };\n}\n\nexport {\n    attrDescriptor,\n    forwardsManyToOneDescriptor,\n    forwardsOneToOneDescriptor,\n    backwardsOneToOneDescriptor,\n    backwardsManyToOneDescriptor,\n    manyToManyDescriptor,\n};\n","import Field from \"./Field\";\n\nimport { attrDescriptor } from \"../descriptors\";\n\n/**\n * @memberof module:fields\n */\nexport class Attribute extends Field {\n    constructor(opts) {\n        super();\n        this.opts = opts || {};\n\n        if (this.opts.hasOwnProperty(\"getDefault\")) {\n            this.getDefault = this.opts.getDefault;\n        }\n    }\n\n    createForwardsDescriptor(fieldName, model) {\n        return attrDescriptor(fieldName);\n    }\n}\n\nexport default Attribute;\n","/* eslint-disable max-classes-per-file */\nimport Field from \"./Field\";\nimport DefaultFieldInstaller from \"./DefaultFieldInstaller\";\n\nimport { reverseFieldName, normalizeModelReference } from \"../utils\";\n\n/**\n * @private\n * @memberof module:fields\n */\nexport class RelationalField extends Field {\n    constructor(...args) {\n        super();\n        if (args.length === 1 && typeof args[0] === \"object\") {\n            const opts = args[0];\n            this.toModelName = normalizeModelReference(opts.to);\n            this.relatedName = opts.relatedName;\n            this.through = normalizeModelReference(opts.through);\n            this.throughFields = opts.throughFields;\n            this.as = opts.as;\n        } else {\n            [this.toModelName, this.relatedName] = [\n                normalizeModelReference(args[0]),\n                args[1],\n            ];\n        }\n    }\n\n    getBackwardsFieldName(model) {\n        return this.relatedName || reverseFieldName(model.modelName);\n    }\n\n    createBackwardsVirtualField(fieldName, model, toModel, throughModel) {\n        const ThisField = this.getClass();\n        return new ThisField(model.modelName, fieldName);\n    }\n\n    get installsBackwardsVirtualField() {\n        return true;\n    }\n\n    get installsBackwardsDescriptor() {\n        return true;\n    }\n\n    references(model) {\n        return this.toModelName === model.modelName;\n    }\n\n    get installerClass() {\n        return class AliasedForwardsDescriptorInstaller extends DefaultFieldInstaller {\n            installForwardsDescriptor() {\n                Object.defineProperty(\n                    this.model.prototype,\n                    this.field.as || this.fieldName, // use supplied name if possible\n                    this.field.createForwardsDescriptor(\n                        this.fieldName,\n                        this.model,\n                        this.toModel,\n                        this.throughModel\n                    )\n                );\n            }\n        };\n    }\n}\n\nexport default RelationalField;\n","import RelationalField from \"./RelationalField\";\n\nimport {\n    forwardsManyToOneDescriptor,\n    backwardsManyToOneDescriptor,\n} from \"../descriptors\";\n\n/**\n * @memberof module:fields\n */\nexport class ForeignKey extends RelationalField {\n    createForwardsDescriptor(fieldName, model, toModel, throughModel) {\n        return forwardsManyToOneDescriptor(fieldName, toModel.modelName);\n    }\n\n    createBackwardsDescriptor(fieldName, model, toModel, throughModel) {\n        return backwardsManyToOneDescriptor(fieldName, model.modelName);\n    }\n\n    get index() {\n        return true;\n    }\n}\n\nexport default ForeignKey;\n","import RelationalField from \"./RelationalField\";\n\nimport { manyToManyDescriptor } from \"../descriptors\";\n\nimport { m2mName, m2mToFieldName, m2mFromFieldName } from \"../utils\";\n\n/**\n * @memberof module:fields\n */\nexport class ManyToMany extends RelationalField {\n    getDefault() {\n        return [];\n    }\n\n    getThroughModelName(fieldName, model) {\n        return this.through || m2mName(model.modelName, fieldName);\n    }\n\n    createForwardsDescriptor(fieldName, model, toModel, throughModel) {\n        return manyToManyDescriptor(\n            model.modelName,\n            toModel.modelName,\n            throughModel.modelName,\n            this.getThroughFields(fieldName, model, toModel, throughModel),\n            false\n        );\n    }\n\n    createBackwardsDescriptor(fieldName, model, toModel, throughModel) {\n        return manyToManyDescriptor(\n            model.modelName,\n            toModel.modelName,\n            throughModel.modelName,\n            this.getThroughFields(fieldName, model, toModel, throughModel),\n            true\n        );\n    }\n\n    createBackwardsVirtualField(fieldName, model, toModel, throughModel) {\n        const ThisField = this.getClass();\n        return new ThisField({\n            to: model.modelName,\n            relatedName: fieldName,\n            through: throughModel.modelName,\n            throughFields: this.getThroughFields(\n                fieldName,\n                model,\n                toModel,\n                throughModel\n            ),\n        });\n    }\n\n    createForwardsVirtualField(fieldName, model, toModel, throughModel) {\n        const ThisField = this.getClass();\n        return new ThisField({\n            to: toModel.modelName,\n            relatedName: fieldName,\n            through: this.through,\n            throughFields: this.getThroughFields(\n                fieldName,\n                model,\n                toModel,\n                throughModel\n            ),\n            as: this.as,\n        });\n    }\n\n    get installsForwardsVirtualField() {\n        return true;\n    }\n\n    getThroughFields(fieldName, model, toModel, throughModel) {\n        if (this.throughFields) {\n            const [fieldAName, fieldBName] = this.throughFields;\n            const fieldA = throughModel.fields[fieldAName];\n            return {\n                to: fieldA.references(toModel) ? fieldAName : fieldBName,\n                from: fieldA.references(toModel) ? fieldBName : fieldAName,\n            };\n        }\n\n        if (model.modelName === toModel.modelName) {\n            /**\n             * we have no way of determining the relationship's\n             * direction here, so we need to assume that the user\n             * did not use a custom through model\n             * see ORM#registerManyToManyModelsFor\n             */\n            return {\n                to: m2mToFieldName(toModel.modelName),\n                from: m2mFromFieldName(model.modelName),\n            };\n        }\n\n        /**\n         * determine which field references which model\n         * and infer the directions from that\n         */\n        const throughModelFieldReferencing = otherModel =>\n            Object.keys(throughModel.fields).find(someFieldName =>\n                throughModel.fields[someFieldName].references(otherModel)\n            );\n\n        return {\n            to: throughModelFieldReferencing(toModel),\n            from: throughModelFieldReferencing(model),\n        };\n    }\n}\n\nexport default ManyToMany;\n","import RelationalField from \"./RelationalField\";\n\nimport {\n    forwardsOneToOneDescriptor,\n    backwardsOneToOneDescriptor,\n} from \"../descriptors\";\n\n/**\n * @memberof module:fields\n */\nexport class OneToOne extends RelationalField {\n    getBackwardsFieldName(model) {\n        return this.relatedName || model.modelName.toLowerCase();\n    }\n\n    createForwardsDescriptor(fieldName, model, toModel, throughModel) {\n        return forwardsOneToOneDescriptor(fieldName, toModel.modelName);\n    }\n\n    createBackwardsDescriptor(fieldName, model, toModel, throughModel) {\n        return backwardsOneToOneDescriptor(fieldName, model.modelName);\n    }\n}\n\nexport default OneToOne;\n","import Attribute from \"./Attribute\";\nimport ForeignKey from \"./ForeignKey\";\nimport ManyToMany from \"./ManyToMany\";\nimport OneToOne from \"./OneToOne\";\n\n/**\n * Contains the logic for how fields on {@link Model}s work\n * and which descriptors must be installed.\n *\n * If your goal is to define fields on a Model class,\n * please use the more convenient methods {@link attr},\n * {@link fk}, {@link many} and {@link oneToOne}.\n *\n * @module fields\n */\n\n/**\n * Defines a value attribute on the model.\n * Though not required, it is recommended to define this for each non-foreign key you wish to use.\n * Getters and setters need to be defined on each Model\n * instantiation for undeclared data fields, which is slower.\n * You can use the optional `getDefault` parameter to fill in unpassed values\n * to {@link Model.create}, such as for generating ID's with UUID:\n *\n * ```javascript\n * import getUUID from 'your-uuid-package-of-choice';\n *\n * fields = {\n *   id: attr({ getDefault: () => getUUID() }),\n *   title: attr(),\n * }\n * ```\n *\n * @param  {Object} [opts]\n * @param {Function} [opts.getDefault] - If you give a function here, its return\n *                                       value from calling with zero arguments will\n *                                       be used as the value when creating a new Model\n *                                       instance with {@link Model#create} if the field\n *                                       value is not passed.\n * @return {Attribute}\n */\nfunction attr(opts) {\n    return new Attribute(opts);\n}\n\n/**\n * Defines a foreign key on a model, which points\n * to a single entity on another model.\n *\n * You can pass arguments as either a single object,\n * or two arguments.\n *\n * If you pass two arguments, the first one is the name\n * of the Model the foreign key is pointing to, and\n * the second one is an optional related name, which will\n * be used to access the Model the foreign key\n * is being defined from, from the target Model.\n *\n * If the related name is not passed, it will be set as\n * `${toModelName}Set`.\n *\n * If you pass an object to `fk`, it has to be in the form\n *\n * ```javascript\n * fields = {\n *   author: fk({ to: 'Author', relatedName: 'books' })\n * }\n * ```\n *\n * Which is equal to\n *\n * ```javascript\n * fields = {\n *   author: fk('Author', 'books'),\n * }\n * ```\n *\n * @param {string|Class<Model>|Object} options - The target Model class, its `modelName`\n *                                               attribute or an options object that\n *                                               contains either as the `to` key.\n * @param {string|Class<Model>} options.to - The target Model class or its `modelName` attribute.\n * @param {string} [options.as] - Name for the new accessor defined for this field. If you don't\n *                                supply this, the key that this field is defined under will be\n *                                overridden.\n * @param {string} [options.relatedName] - The property name that will be used to access\n *                                         a QuerySet for all source models that reference\n *                                         the respective target Model's instance.\n * @param {string} [relatedName] - If you didn't pass an object as the first argument,\n *                                 this is the property name that will be used to\n *                                 access a QuerySet for all source models that reference\n *                                 the respective target Model's instance.\n * @return {ForeignKey}\n */\nfunction fk(...args) {\n    return new ForeignKey(...args);\n}\n\n/**\n * Defines a many-to-many relationship between\n * this (source) and another (target) model.\n *\n * The relationship is modeled with an extra model called the through model.\n * The through model has foreign keys to both the source and target models.\n *\n * You can define your own through model if you want to associate more information\n * to the relationship. A custom through model must have at least two foreign keys,\n * one pointing to the source Model, and one pointing to the target Model.\n *\n * Like `fk`, this function accepts one or two string arguments specifying the other\n * Model and the related name, or a single object argument that allows you to pass\n * a custom through model.\n *\n * If you have more than one foreign key pointing to a source or target Model in the\n * through Model, you must pass the option `throughFields`, which is an array of two\n * strings, where the strings are the field names that identify the foreign keys to\n * be used for the many-to-many relationship. Redux-ORM will figure out which field name\n * points to which model by checking the \"through model\" definition.\n *\n * ```javascript\n * class Authorship extends Model {}\n * Authorship.modelName = 'Authorship';\n * Authorship.fields = {\n *   author: fk('Author', 'authorships'),\n *   book: fk('Book', 'authorships'),\n * };\n *\n * class Author extends Model {}\n * Author.modelName = 'Author';\n * Author.fields = {\n *   books: many({\n *     to: 'Book',\n *     relatedName: 'authors',\n *     through: 'Authorship',\n *\n *     // here this is optional: Redux-ORM can figure\n *     // out the through fields itself since the two\n *     // foreign key fields point to different Models\n *     throughFields: ['author', 'book'],\n *   })\n * };\n *\n * class Book extends Model {}\n * Book.modelName = 'Book';\n * ```\n *\n * You should only define the many-to-many relationship on one side. In the\n * above case of Authors to Books through Authorships, the relationship is\n * defined only on the Author model.\n *\n * @param {string|Class<Model>|Object} options - The target Model class, its `modelName`\n *                                               attribute or an options object that\n *                                               contains either as the `to` key.\n * @param {string|Class<Model>} options.to - The target Model class or its `modelName` attribute.\n * @param {string} [options.as] - Name for the new accessor defined for this field. If you don't\n *                                supply this, the key that this field is defined under will be\n *                                overridden.\n * @param {string|Class<Model>} [options.through] - The through Model class or its `modelName`\n *                                                  attribute. It must declare at least one\n *                                                  foreign key to both source and target models.\n *                                                  If not supplied, Redux-ORM will generate one.\n * @param {string[]} [options.throughFields] - Must be supplied only when a custom through\n *                                             Model has more than one foreign key pointing to\n *                                             either the source or target mode. In this case\n *                                             Redux-ORM can't figure out the correct fields for\n *                                             you, you must provide them. The supplied array should\n *                                             have two elements that are the field names for the\n *                                             through fields you want to declare the many-to-many\n *                                             relationship with. The order doesn't matter;\n *                                             Redux-ORM will figure out which field points to\n *                                             the source Model and which to the target Model.\n * @param {string} [options.relatedName] - The attribute used to access a QuerySet for all\n *                                         source models that reference the respective target\n *                                         Model's instance.\n * @param {string} [relatedName] - If you didn't pass an object as the first argument,\n *                                 this is the property name that will be used to\n *                                 access a QuerySet for all source models that reference\n *                                 the respective target Model's instance.\n * @return {ManyToMany}\n */\nfunction many(...args) {\n    return new ManyToMany(...args);\n}\n\n/**\n * Defines a one-to-one relationship. In database terms, this is a foreign key with the\n * added restriction that only one entity can point to single target entity.\n *\n * The arguments are the same as with `fk`. If `relatedName` is not supplied,\n * the source model name in lowercase will be used. Note that with the one-to-one\n * relationship, the `relatedName` should be in singular, not plural.\n *\n *\n * @param {string|Class<Model>|Object} options - The target Model class, its `modelName`\n *                                               attribute or an options object that\n *                                               contains either as the `to` key.\n * @param {string|Class<Model>} options.to - The target Model class or its `modelName` attribute.\n * @param {string} [options.as] - Name for the new accessor defined for this field. If you don't\n *                                supply this, the key that this field is defined under will be\n *                                overridden.\n * @param {string} [options.relatedName] - The property name that will be used to access the source\n *                                         model instance referencing the target model instance.\n * @param {string} [relatedName] - The property name that will be used to access the source\n *                                 model instance referencing the target model instance\n * @return {OneToOne}\n */\nfunction oneToOne(...args) {\n    return new OneToOne(...args);\n}\n\nexport { fk, attr, many, oneToOne };\n","import Session from \"./Session\";\nimport QuerySet from \"./QuerySet\";\n\nimport { attr } from \"./fields\";\nimport ForeignKey from \"./fields/ForeignKey\";\nimport ManyToMany from \"./fields/ManyToMany\";\nimport OneToOne from \"./fields/OneToOne\";\n\nimport { CREATE, UPDATE, DELETE, FILTER } from \"./constants\";\nimport {\n    normalizeEntity,\n    arrayDiffActions,\n    objectShallowEquals,\n    warnDeprecated,\n    m2mName,\n} from \"./utils\";\n\n/**\n * Generates a query specification to get the instance's\n * corresponding table row using its primary key.\n *\n * @private\n * @returns {Object}\n */\nfunction getByIdQuery(modelInstance) {\n    const modelClass = modelInstance.getClass();\n    const { idAttribute, modelName } = modelClass;\n\n    return {\n        table: modelName,\n        clauses: [\n            {\n                type: FILTER,\n                payload: {\n                    [idAttribute]: modelInstance.getId(),\n                },\n            },\n        ],\n    };\n}\n\n/**\n * The heart of an ORM, the data model.\n *\n * The fields you specify to the Model will be used to generate\n * a schema to the database, related property accessors, and\n * possibly through models.\n *\n * In each {@link Session} you instantiate from an {@link ORM} instance,\n * you will receive a session-specific subclass of this Model. The methods\n * you define here will be available to you in sessions.\n *\n * An instance of {@link Model} represents a record in the database, though\n * it is possible to generate multiple instances from the same record in the database.\n *\n * To create data models in your schema, subclass {@link Model}. To define\n * information about the data model, override static class methods. Define instance\n * logic by defining prototype methods (without `static` keyword).\n */\nconst Model = class Model {\n    /**\n     * Creates a Model instance from it's properties.\n     * Don't use this to create a new record; Use the static method {@link Model#create}.\n     * @param  {Object} props - the properties to instantiate with\n     */\n    constructor(props) {\n        this._initFields(props);\n    }\n\n    _initFields(props) {\n        const propsObj = Object(props);\n        this._fields = { ...propsObj };\n\n        Object.keys(propsObj).forEach(fieldName => {\n            // In this case, we got a prop that wasn't defined as a field.\n            // Assuming it's an arbitrary data field, making an instance-specific\n            // descriptor for it.\n            // Using the in operator as the property could be defined anywhere\n            // on the prototype chain.\n            if (!(fieldName in this)) {\n                Object.defineProperty(this, fieldName, {\n                    get: () => this._fields[fieldName],\n                    set: value => this.set(fieldName, value),\n                    configurable: true,\n                    enumerable: true,\n                });\n            }\n        });\n    }\n\n    static toString() {\n        return `ModelClass: ${this.modelName}`;\n    }\n\n    /**\n     * Returns the options object passed to the database for the table that represents\n     * this Model class.\n     *\n     * Returns an empty object by default, which means the database\n     * will use default options. You can either override this function to return the options\n     * you want to use, or assign the options object as a static property of the same name to the\n     * Model class.\n     *\n     * @return {Object} the options object passed to the database for the table\n     *                  representing this Model class.\n     */\n    static options() {\n        return {};\n    }\n\n    /**\n     * Manually mark individual instances as accessed.\n     * This allows invalidating selector memoization within mutable sessions.\n     *\n     * @param {Array.<*>} ids - Array of primary key values\n     * @return {undefined}\n     */\n    static markAccessed(ids) {\n        if (typeof this._session === \"undefined\") {\n            throw new Error(\n                [\n                    `Tried to mark rows of the ${this.modelName} model as accessed without a session. `,\n                    \"Create a session using `session = orm.session()` and call \",\n                    `\\`session[\"${this.modelName}\"].markAccessed\\` instead.`,\n                ].join(\"\")\n            );\n        }\n        this.session.markAccessed(this.modelName, ids);\n    }\n\n    /**\n     * Manually mark this model's table as scanned.\n     * This allows invalidating selector memoization within mutable sessions.\n     *\n     * @return {undefined}\n     */\n    static markFullTableScanned() {\n        if (typeof this._session === \"undefined\") {\n            throw new Error(\n                [\n                    `Tried to mark the ${this.modelName} model as full table scanned without a session. `,\n                    \"Create a session using `session = orm.session()` and call \",\n                    `\\`session[\"${this.modelName}\"].markFullTableScanned\\` instead.`,\n                ].join(\"\")\n            );\n        }\n        this.session.markFullTableScanned(this.modelName);\n    }\n\n    /**\n     * Manually mark indexes as accessed.\n     * This allows invalidating selector memoization within mutable sessions.\n     *\n     * @param {Array.<Array.<*,*>>} indexes - Array of column-value pairs\n     * @return {undefined}\n     */\n    static markAccessedIndexes(indexes) {\n        if (typeof this._session === \"undefined\") {\n            throw new Error(\n                [\n                    `Tried to mark indexes for the ${this.modelName} model as accessed without a session. `,\n                    \"Create a session using `session = orm.session()` and call \",\n                    `\\`session[\"${this.modelName}\"].markAccessedIndexes\\` instead.`,\n                ].join(\"\")\n            );\n        }\n        this.session.markAccessedIndexes(\n            indexes.map(([attribute, value]) => [\n                this.modelName,\n                attribute,\n                value,\n            ])\n        );\n    }\n\n    /**\n     * Returns the id attribute of this {@link Model}.\n     *\n     * @return {string} The id attribute of this {@link Model}.\n     */\n    static get idAttribute() {\n        if (typeof this._session === \"undefined\") {\n            throw new Error(\n                [\n                    `Tried to get the ${this.modelName} model's id attribute without a session. `,\n                    \"Create a session using `session = orm.session()` and access \",\n                    `\\`session[\"${this.modelName}\"].idAttribute\\` instead.`,\n                ].join(\"\")\n            );\n        }\n        return this.session.db.describe(this.modelName).idAttribute;\n    }\n\n    /**\n     * Connect the model class to a {@link Session}.\n     *\n     * @private\n     * @param  {Session} session - The session to connect to.\n     */\n    static connect(session) {\n        if (!(session instanceof Session)) {\n            throw new Error(\n                \"A model can only be connected to instances of Session.\"\n            );\n        }\n        this._session = session;\n    }\n\n    /**\n     * Get the current {@link Session} instance.\n     *\n     * @private\n     * @return {Session} The current {@link Session} instance.\n     */\n    static get session() {\n        return this._session;\n    }\n\n    /**\n     * Returns an instance of the model's `querySetClass` field.\n     * By default, this will be an empty {@link QuerySet}.\n     *\n     * @return {Object} An instance of the model's `querySetClass`.\n     */\n    static getQuerySet() {\n        const { querySetClass: QuerySetClass } = this;\n        return new QuerySetClass(this);\n    }\n\n    /**\n     * @return {undefined}\n     */\n    static invalidateClassCache() {\n        this.isSetUp = undefined;\n        this.virtualFields = {};\n    }\n\n    /**\n     * @see {@link Model.getQuerySet}\n     */\n    static get query() {\n        return this.getQuerySet();\n    }\n\n    /**\n     * Returns parameters to be passed to {@link Table} instance.\n     *\n     * @private\n     */\n    static tableOptions() {\n        if (typeof this.backend === \"function\") {\n            warnDeprecated(\n                \"`Model.backend` has been deprecated. Please rename to `.options`.\"\n            );\n            return this.backend();\n        }\n        if (this.backend) {\n            warnDeprecated(\n                \"`Model.backend` has been deprecated. Please rename to `.options`.\"\n            );\n            return this.backend;\n        }\n        if (typeof this.options === \"function\") {\n            return this.options();\n        }\n        return this.options;\n    }\n\n    /**\n     * Creates a new record in the database, instantiates a {@link Model} and returns it.\n     *\n     * If you pass values for many-to-many fields, instances are created on the through\n     * model as well.\n     *\n     * @param  {Object} userProps - the new {@link Model}'s properties.\n     * @return {Model} a new {@link Model} instance.\n     */\n    static create(userProps) {\n        if (typeof this._session === \"undefined\") {\n            throw new Error(\n                [\n                    `Tried to create a ${this.modelName} model instance without a session. `,\n                    \"Create a session using `session = orm.session()` and call \",\n                    `\\`session[\"${this.modelName}\"].create\\` instead.`,\n                ].join(\"\")\n            );\n        }\n        const props = { ...userProps };\n\n        const m2mRelations = {};\n\n        const declaredFieldNames = Object.keys(this.fields);\n        const declaredVirtualFieldNames = Object.keys(this.virtualFields);\n\n        declaredFieldNames.forEach(key => {\n            const field = this.fields[key];\n            const valuePassed = userProps.hasOwnProperty(key);\n            if (!(field instanceof ManyToMany)) {\n                if (valuePassed) {\n                    const value = userProps[key];\n                    props[key] = normalizeEntity(value);\n                } else if (field.getDefault) {\n                    props[key] = field.getDefault();\n                }\n            } else if (valuePassed) {\n                // Save for later processing\n                m2mRelations[key] = userProps[key];\n\n                if (!field.as) {\n                    /**\n                     * The relationship does not have an accessor\n                     * Discard the value from props as the field will be populated later with instances\n                     * from the target models when refreshing the M2M relations.\n                     * If the relationship does have an accessor (`as`) field then we do want to keep this\n                     * original value in the props to expose the raw list of IDs from the instance.\n                     */\n                    delete props[key];\n                }\n            }\n        });\n\n        // add backward many-many if required\n        declaredVirtualFieldNames.forEach(key => {\n            if (!m2mRelations.hasOwnProperty(key)) {\n                const field = this.virtualFields[key];\n                if (\n                    userProps.hasOwnProperty(key) &&\n                    field instanceof ManyToMany\n                ) {\n                    // If a value is supplied for a ManyToMany field,\n                    // discard them from props and save for later processing.\n                    m2mRelations[key] = userProps[key];\n                    delete props[key];\n                }\n            }\n        });\n\n        const newEntry = this.session.applyUpdate({\n            action: CREATE,\n            table: this.modelName,\n            payload: props,\n        });\n\n        const ThisModel = this;\n        const instance = new ThisModel(newEntry);\n        instance._refreshMany2Many(m2mRelations); // eslint-disable-line no-underscore-dangle\n        return instance;\n    }\n\n    /**\n     * Creates a new or update existing record in the database, instantiates a {@link Model} and returns it.\n     *\n     * If you pass values for many-to-many fields, instances are created on the through\n     * model as well.\n     *\n     * @param  {Object} userProps - the required {@link Model}'s properties.\n     * @return {Model} a {@link Model} instance.\n     */\n    static upsert(userProps) {\n        if (typeof this.session === \"undefined\") {\n            throw new Error(\n                [\n                    `Tried to upsert a ${this.modelName} model instance without a session. `,\n                    \"Create a session using `session = orm.session()` and call \",\n                    `\\`session[\"${this.modelName}\"].upsert\\` instead.`,\n                ].join(\"\")\n            );\n        }\n\n        const { idAttribute } = this;\n        if (userProps.hasOwnProperty(idAttribute)) {\n            const id = userProps[idAttribute];\n            if (this.idExists(id)) {\n                const model = this.withId(id);\n                model.update(userProps);\n                return model;\n            }\n        }\n\n        return this.create(userProps);\n    }\n\n    /**\n     * Returns a {@link Model} instance for the object with id `id`.\n     * Returns `null` if the model has no instance with id `id`.\n     *\n     * You can use {@link Model#idExists} to check for existence instead.\n     *\n     * @param  {*} id - the `id` of the object to get\n     * @throws If object with id `id` doesn't exist\n     * @return {Model|null} {@link Model} instance with id `id`\n     */\n    static withId(id) {\n        return this.get({\n            [this.idAttribute]: id,\n        });\n    }\n\n    /**\n     * Returns a boolean indicating if an entity\n     * with the id `id` exists in the state.\n     *\n     * @param  {*}  id - a value corresponding to the id attribute of the {@link Model} class.\n     * @return {Boolean} a boolean indicating if entity with `id` exists in the state\n     *\n     * @since 0.11.0\n     */\n    static idExists(id) {\n        return this.exists({\n            [this.idAttribute]: id,\n        });\n    }\n\n    /**\n     * Returns a boolean indicating if an entity\n     * with the given props exists in the state.\n     *\n     * @param  {*}  props - a key-value that {@link Model} instances should have to be considered as existing.\n     * @return {Boolean} a boolean indicating if entity with `props` exists in the state\n     */\n    static exists(lookupObj) {\n        if (typeof this.session === \"undefined\") {\n            throw new Error(\n                [\n                    `Tried to check if a ${this.modelName} model instance exists without a session. `,\n                    \"Create a session using `session = orm.session()` and call \",\n                    `\\`session[\"${this.modelName}\"].exists\\` instead.`,\n                ].join(\"\")\n            );\n        }\n\n        return Boolean(this._findDatabaseRows(lookupObj).length);\n    }\n\n    /**\n     * Gets the {@link Model} instance that matches properties in `lookupObj`.\n     * Throws an error if {@link Model} if multiple records match\n     * the properties.\n     *\n     * @param  {Object} lookupObj - the properties used to match a single entity.\n     * @throws {Error} If more than one entity matches the properties in `lookupObj`.\n     * @return {Model} a {@link Model} instance that matches the properties in `lookupObj`.\n     */\n    static get(lookupObj) {\n        const ThisModel = this;\n\n        const rows = this._findDatabaseRows(lookupObj);\n        if (rows.length === 0) {\n            return null;\n        }\n        if (rows.length > 1) {\n            throw new Error(\n                `Expected to find a single row in \\`${this.modelName}.get\\`. Found ${rows.length}.`\n            );\n        }\n\n        return new ThisModel(rows[0]);\n    }\n\n    /**\n     * Gets the {@link Model} class or subclass constructor (the class that\n     * instantiated this instance).\n     *\n     * @return {Model} The {@link Model} class or subclass constructor used to instantiate\n     *                 this instance.\n     */\n    getClass() {\n        return this.constructor;\n    }\n\n    /**\n     * Gets the id value of the current instance by looking up the id attribute.\n     * @return {*} The id value of the current instance.\n     */\n    getId() {\n        return this._fields[this.getClass().idAttribute];\n    }\n\n    /**\n     * Returns a reference to the plain JS object in the store.\n     * It contains all the properties that you pass when creating the model,\n     * except for primary keys of many-to-many relationships with a custom accessor.\n     *\n     * Make sure never to mutate this.\n     *\n     * @return {Object} a reference to the plain JS object in the store\n     */\n    get ref() {\n        const ThisModel = this.getClass();\n\n        // eslint-disable-next-line no-underscore-dangle\n        return ThisModel._findDatabaseRows({\n            [ThisModel.idAttribute]: this.getId(),\n        })[0];\n    }\n\n    /**\n     * Finds all rows in this model's table that match the given `lookupObj`.\n     * If no `lookupObj` is passed, all rows in the model's table will be returned.\n     *\n     * @param  {*}  props - a key-value that {@link Model} instances should have to be considered as existing.\n     * @return {Boolean} a boolean indicating if entity with `props` exists in the state\n     * @private\n     */\n    static _findDatabaseRows(lookupObj) {\n        const querySpec = {\n            table: this.modelName,\n        };\n        if (lookupObj) {\n            querySpec.clauses = [\n                {\n                    type: FILTER,\n                    payload: lookupObj,\n                },\n            ];\n        }\n        return this.session.query(querySpec).rows;\n    }\n\n    /**\n     * Returns a string representation of the {@link Model} instance.\n     *\n     * @return {string} A string representation of this {@link Model} instance.\n     */\n    toString() {\n        const ThisModel = this.getClass();\n        const className = ThisModel.modelName;\n        const fieldNames = Object.keys(ThisModel.fields);\n        const fields = fieldNames\n            .map(fieldName => {\n                const field = ThisModel.fields[fieldName];\n                if (field instanceof ManyToMany) {\n                    const ids = this[fieldName]\n                        .toModelArray()\n                        .map(model => model.getId());\n                    return `${fieldName}: [${ids.join(\", \")}]`;\n                }\n                const val = this._fields[fieldName];\n                return `${fieldName}: ${val}`;\n            })\n            .join(\", \");\n        return `${className}: {${fields}}`;\n    }\n\n    /**\n     * Returns a boolean indicating if `otherModel` equals this {@link Model} instance.\n     * Equality is determined by shallow comparing their attributes.\n     *\n     * This equality is used when you call {@link Model#update}.\n     * You can prevent model updates by returning `true` here.\n     * However, a model will always be updated if its relationships are changed.\n     *\n     * @param  {Model} otherModel - a {@link Model} instance to compare\n     * @return {Boolean} a boolean indicating if the {@link Model} instance's are equal.\n     */\n    equals(otherModel) {\n        // eslint-disable-next-line no-underscore-dangle\n        return objectShallowEquals(this._fields, otherModel._fields);\n    }\n\n    /**\n     * Updates a property name to given value for this {@link Model} instance.\n     * The values are immediately committed to the database.\n     *\n     * @param {string} propertyName - name of the property to set\n     * @param {*} value - value assigned to the property\n     * @return {undefined}\n     */\n    set(propertyName, value) {\n        this.update({\n            [propertyName]: value,\n        });\n    }\n\n    /**\n     * Assigns multiple fields and corresponding values to this {@link Model} instance.\n     * The updates are immediately committed to the database.\n     *\n     * @param  {Object} userMergeObj - an object that will be merged with this instance.\n     * @return {undefined}\n     */\n    update(userMergeObj) {\n        const ThisModel = this.getClass();\n        if (typeof ThisModel.session === \"undefined\") {\n            throw new Error(\n                [\n                    `Tried to update a ${ThisModel.modelName} model instance without a session. `,\n                    \"You cannot call `.update` on an instance that you did not receive from the database.\",\n                ].join(\"\")\n            );\n        }\n\n        const mergeObj = { ...userMergeObj };\n\n        const { fields, virtualFields } = ThisModel;\n\n        const m2mRelations = {};\n\n        // If an array of entities or id's is supplied for a\n        // many-to-many related field, clear the old relations\n        // and add the new ones.\n        // eslint-disable-next-line guard-for-in, no-restricted-syntax\n        for (const mergeKey in mergeObj) {\n            const isRealField = fields.hasOwnProperty(mergeKey);\n\n            if (isRealField) {\n                const field = fields[mergeKey];\n\n                if (field instanceof ForeignKey || field instanceof OneToOne) {\n                    // update one-one/fk relations\n                    mergeObj[mergeKey] = normalizeEntity(mergeObj[mergeKey]);\n                } else if (field instanceof ManyToMany) {\n                    // field is forward relation\n                    m2mRelations[mergeKey] = mergeObj[mergeKey];\n\n                    if (!field.as) {\n                        /**\n                         * The relationship does not have an accessor\n                         * Discard the value from props as the field will be populated later with instances\n                         * from the target models when refreshing the M2M relations.\n                         * If the relationship does have an accessor (`as`) field then we do want to keep this\n                         * original value in the props to expose the raw list of IDs from the instance.\n                         */\n                        delete mergeObj[mergeKey];\n                    }\n                }\n            } else if (virtualFields.hasOwnProperty(mergeKey)) {\n                const field = virtualFields[mergeKey];\n                if (field instanceof ManyToMany) {\n                    // field is backward relation\n                    m2mRelations[mergeKey] = mergeObj[mergeKey];\n                    delete mergeObj[mergeKey];\n                }\n            }\n        }\n\n        const mergedFields = {\n            ...this._fields,\n            ...mergeObj,\n        };\n\n        const updatedModel = new ThisModel(mergedFields);\n        // only update fields if they have changed (referentially)\n        if (!this.equals(updatedModel)) {\n            this._initFields(mergedFields);\n            ThisModel.session.applyUpdate({\n                action: UPDATE,\n                query: getByIdQuery(this),\n                payload: mergeObj,\n            });\n        }\n\n        // update virtual fields\n        this._refreshMany2Many(m2mRelations);\n    }\n\n    /**\n     * Updates {@link Model} instance attributes to reflect the\n     * database state in the current session.\n     * @return {undefined}\n     */\n    refreshFromState() {\n        this._initFields(this.ref);\n    }\n\n    /**\n     * Deletes the record for this {@link Model} instance.\n     * You'll still be able to access fields and values on the instance.\n     *\n     * @return {undefined}\n     */\n    delete() {\n        const ThisModel = this.getClass();\n        if (typeof ThisModel.session === \"undefined\") {\n            throw new Error(\n                [\n                    `Tried to delete a ${ThisModel.modelName} model instance without a session. `,\n                    \"You cannot call `.delete` on an instance that you did not receive from the database.\",\n                ].join(\"\")\n            );\n        }\n\n        this._onDelete();\n        ThisModel.session.applyUpdate({\n            action: DELETE,\n            query: getByIdQuery(this),\n        });\n    }\n\n    /**\n     * Update many-many relations for model.\n     * @param relations\n     * @return undefined\n     * @private\n     */\n    _refreshMany2Many(relations) {\n        const ThisModel = this.getClass();\n        const { fields, virtualFields, modelName } = ThisModel;\n\n        Object.keys(relations).forEach(name => {\n            const reverse = !fields.hasOwnProperty(name);\n            const field = virtualFields[name];\n            const values = relations[name];\n\n            if (!Array.isArray(values)) {\n                throw new TypeError(\n                    `Failed to resolve many-to-many relationship: ${modelName}[${name}] must be an array (passed: ${values})`\n                );\n            }\n\n            const normalizedNewIds = values.map(normalizeEntity);\n            const uniqueIds = [...new Set(normalizedNewIds)];\n\n            if (normalizedNewIds.length !== uniqueIds.length) {\n                throw new Error(\n                    `Found duplicate id(s) when passing \"${normalizedNewIds}\" to ${ThisModel.modelName}.${name} value`\n                );\n            }\n\n            const throughModelName =\n                field.through || m2mName(ThisModel.modelName, name);\n            const ThroughModel = ThisModel.session[throughModelName];\n\n            let fromField;\n            let toField;\n\n            if (!reverse) {\n                ({ from: fromField, to: toField } = field.throughFields);\n            } else {\n                ({ from: toField, to: fromField } = field.throughFields);\n            }\n\n            const currentIds = ThroughModel.filter(\n                through => through[fromField] === this[ThisModel.idAttribute]\n            )\n                .toRefArray()\n                .map(ref => ref[toField]);\n\n            const diffActions = arrayDiffActions(currentIds, normalizedNewIds);\n\n            if (diffActions) {\n                const { delete: idsToDelete, add: idsToAdd } = diffActions;\n                if (idsToDelete.length > 0) {\n                    this[field.as || name].remove(...idsToDelete);\n                }\n\n                if (idsToAdd.length > 0) {\n                    this[field.as || name].add(...idsToAdd);\n                }\n            }\n        });\n    }\n\n    /**\n     * @return {undefined}\n     * @private\n     */\n    _onDelete() {\n        const { virtualFields } = this.getClass();\n        // eslint-disable-next-line guard-for-in, no-restricted-syntax\n        for (const key in virtualFields) {\n            const field = virtualFields[key];\n            if (field instanceof ManyToMany) {\n                // Delete any many-to-many rows the entity is included in.\n                const descriptorKey = field.as || key;\n                this[descriptorKey].clear();\n            } else if (field instanceof ForeignKey) {\n                const relatedQs = this[key];\n                if (relatedQs.exists()) {\n                    relatedQs.update({ [field.relatedName]: null });\n                }\n            } else if (field instanceof OneToOne) {\n                // Set null to any foreign keys or one to ones pointed to\n                // this instance.\n                if (this[key] !== null) {\n                    this[key][field.relatedName] = null;\n                }\n            }\n        }\n    }\n\n    // DEPRECATED AND REMOVED METHODS\n\n    /**\n     * Returns a boolean indicating if an entity\n     * with the id `id` exists in the state.\n     *\n     * @param  {*}  id - a value corresponding to the id attribute of the {@link Model} class.\n     * @return {Boolean} a boolean indicating if entity with `id` exists in the state\n     * @deprecated Please use {@link Model.idExists} instead.\n     */\n    static hasId(id) {\n        console.warn(\n            \"`Model.hasId` has been deprecated. Please use `Model.idExists` instead.\"\n        );\n        return this.idExists(id);\n    }\n\n    /**\n     * @deprecated See the 0.9 migration guide on the GitHub repo.\n     * @throws {Error} Due to deprecation.\n     */\n    getNextState() {\n        throw new Error(\n            \"`Model.prototype.getNextState` has been removed. See the 0.9 \" +\n                \"migration guide on the GitHub repo.\"\n        );\n    }\n};\n\nModel.fields = {\n    id: attr(),\n};\nModel.virtualFields = {};\nModel.querySetClass = QuerySet;\n\nexport default Model;\n","import ops from \"immutable-ops\";\nimport filter from \"lodash/filter\";\nimport orderBy from \"lodash/orderBy\";\nimport reject from \"lodash/reject\";\nimport sortBy from \"lodash/sortBy\";\n\nimport { EXCLUDE, FILTER, ORDER_BY } from \"../constants\";\nimport { clauseFiltersByAttribute, clauseReducesResultSetSize } from \"../utils\";\n\nconst DEFAULT_TABLE_OPTIONS = {\n    idAttribute: \"id\",\n    arrName: \"items\",\n    mapName: \"itemsById\",\n    fields: {},\n};\n\n/**\n * @private\n * @param {*} _currMax - the current max id\n * @param {*} userPassedId - the new id passed to the create action\n *\n * Both may be undefined. The current max id in the case that this is the first Model\n * being created, and the new id if the id was not explicitly passed to the\n * database.\n *\n * @return {Array} the new max id and the id to use to create the new row\n *\n * If the id's are strings, the id must be passed explicitly every time.\n * In this case, the current max id will remain `NaN` due to `Math.max`, but that's fine.\n */\nfunction idSequencer(_currMax, userPassedId) {\n    let currMax = _currMax;\n    let newMax;\n    let newId;\n\n    if (currMax === undefined) {\n        currMax = -1;\n    }\n\n    if (userPassedId === undefined) {\n        newMax = currMax + 1;\n        newId = newMax;\n    } else {\n        newMax = Math.max(currMax + 1, userPassedId);\n        newId = userPassedId;\n    }\n\n    return [\n        newMax, // new max id\n        newId, // id to use for row creation\n    ];\n}\n\n/**\n * Adapt order directions array to @{lodash.orderBy} API.\n *\n * @private\n *\n * @param {Array<Boolean|'asc'|'desc'>} orders? - an array of optional order query directions as provided to {@Link {QuerySet.orderBy}}\n * @return {Array<'asc'|'desc'>|undefined} A normalized ordering array or undefined if none was provided.\n */\nfunction normalizeOrders(orders) {\n    if (orders === undefined) {\n        return undefined;\n    }\n    const convert = order => {\n        if ([\"desc\", false].includes(order)) {\n            return \"desc\";\n        }\n        return \"asc\";\n    };\n    return Array.isArray(orders) ? orders.map(convert) : convert(orders);\n}\n\n/**\n * Handles the underlying data structure for a {@link Model} class.\n * @private\n */\nexport class Table {\n    /**\n     * Creates a new {@link Table} instance.\n     * @param  {Object} userOpts - options to use.\n     * @param  {string} [userOpts.idAttribute=id] - the id attribute of the entity.\n     * @param  {string} [userOpts.arrName=items] - the state attribute where an array of\n     *                                             entity id's are stored\n     * @param  {string} [userOpts.mapName=itemsById] - the state attribute where the entity objects\n     *                                                 are stored in a id to entity object\n     *                                                 map.\n     * @param  {string} [userOpts.fields={}] - mapping of field key to {@link Field} object\n     */\n    constructor(userOpts) {\n        Object.assign(this, DEFAULT_TABLE_OPTIONS, userOpts);\n    }\n\n    /**\n     * Returns a reference to the object at index `id`\n     * in state `branch`.\n     *\n     * @param  {Object} branch - the state\n     * @param  {Number} id - the id of the object to get\n     * @return {Object|undefined} A reference to the raw object in the state or\n     *                            `undefined` if not found.\n     */\n    accessId(branch, id) {\n        return branch[this.mapName][id];\n    }\n\n    accessIds(branch, ids) {\n        const map = branch[this.mapName];\n        return ids.map(id => map[id]);\n    }\n\n    idExists(branch, id) {\n        return branch[this.mapName].hasOwnProperty(id);\n    }\n\n    accessIdList(branch) {\n        return branch[this.arrName];\n    }\n\n    accessList(branch) {\n        return this.accessIds(branch, this.accessIdList(branch));\n    }\n\n    getMaxId(branch) {\n        return this.getMeta(branch, \"maxId\");\n    }\n\n    setMaxId(tx, branch, newMaxId) {\n        return this.setMeta(tx, branch, \"maxId\", newMaxId);\n    }\n\n    nextId(id) {\n        return id + 1;\n    }\n\n    /**\n     * Returns the default state for the data structure.\n     * @return {Object} The default state for this {@link ORM} instance's data structure\n     */\n    getEmptyState() {\n        const pkIndex = {\n            [this.arrName]: [],\n            [this.mapName]: {},\n        };\n        const attrIndexes = Object.keys(this.fields)\n            .filter(attr => attr !== this.idAttribute)\n            .filter(attr => this.fields[attr].index)\n            .reduce(\n                (indexes, attr) => ({\n                    ...indexes,\n                    [attr]: {},\n                }),\n                {}\n            );\n        return {\n            ...pkIndex,\n            indexes: attrIndexes,\n            meta: {},\n        };\n    }\n\n    setMeta(tx, branch, key, value) {\n        const { batchToken, withMutations } = tx;\n        if (withMutations) {\n            const res = ops.mutable.setIn([\"meta\", key], value, branch);\n            return res;\n        }\n\n        return ops.batch.setIn(batchToken, [\"meta\", key], value, branch);\n    }\n\n    getMeta(branch, key) {\n        return branch.meta[key];\n    }\n\n    query(branch, clauses) {\n        if (clauses.length === 0) {\n            return this.accessList(branch);\n        }\n\n        const { idAttribute } = this;\n\n        const optimallyOrderedClauses = sortBy(clauses, clause => {\n            if (clauseFiltersByAttribute(clause, idAttribute)) {\n                return 1;\n            }\n\n            if (clauseReducesResultSetSize(clause)) {\n                return 2;\n            }\n\n            return 3;\n        });\n\n        const reducer = (rows, clause) => {\n            const { type, payload } = clause;\n            if (!rows) {\n                /**\n                 * First time this reducer is called during query.\n                 * This is where we apply query optimizations.\n                 */\n                if (clauseFiltersByAttribute(clause, idAttribute)) {\n                    /**\n                     * Payload specified a primary key. Use PK index\n                     * to look up the single row identified by the PK.\n                     */\n                    const id = payload[idAttribute];\n                    const remainingPayload = Object.keys(payload).reduce(\n                        (withoutPkAttr, filterAttr) => {\n                            if (filterAttr !== idAttribute) {\n                                withoutPkAttr[filterAttr] = payload[filterAttr];\n                            }\n                            return withoutPkAttr;\n                        },\n                        {}\n                    );\n                    const ids = this.idExists(branch, id) ? [id] : [];\n                    if (Object.keys(remainingPayload).length) {\n                        /**\n                         * Payload has additional, non-PK columns.\n                         * Filter accessed row by remaining payload (if one was found).\n                         */\n                        return reducer(this.accessIds(branch, ids), {\n                            ...clause,\n                            payload: remainingPayload,\n                        });\n                    }\n                    /**\n                     * No need to filter these rows any further.\n                     * The primary key value satisfies this clause's conditions.\n                     */\n                    return this.accessIds(branch, ids);\n                }\n                if (type === FILTER && typeof payload === \"object\") {\n                    const indexes = Object.entries(branch.indexes);\n                    const accessedIndexes = [];\n                    const indexAttrs = [];\n                    indexes.forEach(([attr, index]) => {\n                        if (clauseFiltersByAttribute(clause, attr)) {\n                            /**\n                             * Payload specified an indexed attribute. Use index\n                             * to potentially decrease amount of accessed rows.\n                             */\n                            if (index.hasOwnProperty(payload[attr])) {\n                                accessedIndexes.push(index[payload[attr]]);\n                                indexAttrs.push(attr);\n                            }\n                        }\n                    });\n                    /**\n                     * Calculate set of unique PK values corresponding to each\n                     * foreign key's attribute value. Then retrieve all those rows.\n                     */\n                    if (accessedIndexes.length) {\n                        const lastIndex = accessedIndexes.pop();\n                        const indexedIds = accessedIndexes.reduce(\n                            (result, index) => {\n                                const indexSet = new Set(index);\n                                return result.filter(\n                                    Set.prototype.has,\n                                    indexSet\n                                );\n                            },\n                            lastIndex\n                        );\n                        const remainingPayload = Object.keys(payload).reduce(\n                            (withoutIndexAttrs, filterAttr) => {\n                                if (!indexAttrs.includes(filterAttr)) {\n                                    withoutIndexAttrs[filterAttr] =\n                                        payload[filterAttr];\n                                }\n                                return withoutIndexAttrs;\n                            },\n                            {}\n                        );\n                        if (Object.keys(remainingPayload).length) {\n                            /**\n                             * Payload has additional, non-indexed columns.\n                             * Filter indexed rows by remaining payload (if any were found).\n                             */\n                            return reducer(this.accessIds(branch, indexedIds), {\n                                ...clause,\n                                payload: remainingPayload,\n                            });\n                        }\n                        /**\n                         * No need to filter these rows any further.\n                         * The used indexes satisfy this clause's conditions.\n                         */\n                        return this.accessIds(branch, indexedIds);\n                    }\n                }\n\n                // Give up optimization: Retrieve all rows (full table scan).\n                return reducer(this.accessList(branch), clause);\n            }\n\n            switch (type) {\n                case FILTER: {\n                    return filter(rows, payload);\n                }\n                case EXCLUDE: {\n                    return reject(rows, payload);\n                }\n                case ORDER_BY: {\n                    const [iteratees, orders] = payload;\n                    return orderBy(rows, iteratees, normalizeOrders(orders));\n                }\n                default:\n                    return rows;\n            }\n        };\n\n        return optimallyOrderedClauses.reduce(reducer, undefined);\n    }\n\n    /**\n     * Returns the data structure including a new object `entry`\n     * @param  {Object} tx - transaction info\n     * @param  {Object} branch - the data structure state\n     * @param  {Object} entry - the object to insert\n     * @return {Object} an object with two keys: `state` and `created`.\n     *                  `state` is the new table state and `created` is the\n     *                  row that was created.\n     */\n    insert(tx, branch, entry) {\n        const { batchToken, withMutations } = tx;\n\n        const hasId = entry.hasOwnProperty(this.idAttribute);\n\n        let workingState = branch;\n\n        // This will not affect string id's.\n        const [newMaxId, id] = idSequencer(\n            this.getMaxId(branch),\n            entry[this.idAttribute]\n        );\n        workingState = this.setMaxId(tx, branch, newMaxId);\n\n        const finalEntry = hasId\n            ? entry\n            : ops.batch.set(batchToken, this.idAttribute, id, entry);\n\n        const indexesToAppendTo = Object.keys(workingState.indexes)\n            .filter(\n                fkAttr => entry.hasOwnProperty(fkAttr) && entry[fkAttr] !== null\n            )\n            .map(fkAttr => [fkAttr, entry[fkAttr]]);\n\n        if (withMutations) {\n            ops.mutable.push(id, workingState[this.arrName]);\n            ops.mutable.set(id, finalEntry, workingState[this.mapName]);\n            // add id to indexes\n            indexesToAppendTo.forEach(([attr, value]) => {\n                const attrIndex = workingState.indexes[attr];\n                if (attrIndex.hasOwnProperty(value)) {\n                    ops.mutable.push(id, attrIndex[value]);\n                } else {\n                    ops.mutable.set(value, [id], attrIndex);\n                }\n            });\n            return {\n                state: workingState,\n                created: finalEntry,\n            };\n        }\n\n        const nextIndexes = ops.batch.merge(\n            batchToken,\n            indexesToAppendTo.reduce(\n                (indexMap, [attr, value]) => {\n                    indexMap[attr] = ops.batch.merge(\n                        batchToken,\n                        {\n                            [value]: ops.batch.push(\n                                batchToken,\n                                id,\n                                indexMap[attr][value] || []\n                            ),\n                        },\n                        indexMap[attr]\n                    );\n                    return indexMap;\n                },\n                { ...workingState.indexes }\n            ),\n            workingState.indexes\n        );\n\n        const nextState = ops.batch.merge(\n            batchToken,\n            {\n                [this.arrName]: ops.batch.push(\n                    batchToken,\n                    id,\n                    workingState[this.arrName]\n                ),\n                [this.mapName]: ops.batch.merge(\n                    batchToken,\n                    {\n                        [id]: finalEntry,\n                    },\n                    workingState[this.mapName]\n                ),\n                indexes: nextIndexes,\n            },\n            workingState\n        );\n\n        return {\n            state: nextState,\n            created: finalEntry,\n        };\n    }\n\n    /**\n     * Returns the data structure with objects where `rows`\n     * are merged with `mergeObj`.\n     *\n     * @param  {Object} tx - transaction info\n     * @param  {Object} branch - the data structure state\n     * @param  {Object[]} rows - rows to update\n     * @param  {Object} mergeObj - The object to merge with each row.\n     * @return {Object}\n     */\n    update(tx, branch, rows, mergeObj) {\n        const { batchToken, withMutations } = tx;\n\n        const mergeObjInto = row => {\n            const merge = withMutations\n                ? ops.mutable.merge\n                : ops.batch.merge(batchToken);\n            return merge(mergeObj, row);\n        };\n\n        const set = withMutations ? ops.mutable.set : ops.batch.set(batchToken);\n\n        const indexedAttrs = Object.keys(branch.indexes).filter(attr =>\n            mergeObj.hasOwnProperty(attr)\n        );\n        const indexIdsToAdd = [];\n        const indexIdsToDelete = [];\n\n        const nextMap = rows.reduce((map, row) => {\n            const prevAttrValues = indexedAttrs.reduce(\n                (valueMap, attr) => ({\n                    ...valueMap,\n                    [attr]: row[attr],\n                }),\n                {}\n            );\n            const result = mergeObjInto(row);\n            const nextAttrValues = indexedAttrs.reduce(\n                (valueMap, attr) => ({\n                    ...valueMap,\n                    [attr]: result[attr],\n                }),\n                {}\n            );\n            const id = result[this.idAttribute];\n            const nextRow = set(id, result, map);\n            indexedAttrs.forEach(attr => {\n                const { [attr]: prevValue } = prevAttrValues;\n                const { [attr]: nextValue } = nextAttrValues;\n                if (prevValue === nextValue) {\n                    // attribute has not changed, no need to update any index\n                    return;\n                }\n                if (prevValue !== null && typeof prevValue !== \"undefined\") {\n                    // remove id from attribute's index for its old value\n                    indexIdsToDelete.push([attr, prevValue, id]);\n                }\n                if (nextValue !== null) {\n                    // add id to attribute's index for its new value\n                    indexIdsToAdd.push([attr, nextValue, id]);\n                }\n            });\n            return nextRow;\n        }, branch[this.mapName]);\n\n        let nextIndexes = branch.indexes;\n        if (withMutations) {\n            indexIdsToDelete.forEach(([attr, value, id]) => {\n                const arr = nextIndexes[attr][value];\n                const idx = arr.indexOf(id);\n                ops.mutable.splice(idx, 1, [], arr);\n            });\n            indexIdsToAdd.forEach(([attr, value, id]) => {\n                ops.mutable.push(id, nextIndexes[attr][value]);\n            });\n        } else {\n            if (indexIdsToAdd.length) {\n                nextIndexes = ops.batch.merge(\n                    batchToken,\n                    indexIdsToAdd.reduce(\n                        (indexMap, [attr, value, id]) => {\n                            indexMap[attr] = ops.batch.merge(\n                                batchToken,\n                                {\n                                    [value]: ops.batch.push(\n                                        batchToken,\n                                        id,\n                                        indexMap[attr][value] || []\n                                    ),\n                                },\n                                indexMap[attr]\n                            );\n                            return indexMap;\n                        },\n                        { ...nextIndexes }\n                    ),\n                    nextIndexes\n                );\n            }\n            if (indexIdsToDelete.length) {\n                nextIndexes = ops.batch.merge(\n                    batchToken,\n                    indexIdsToDelete.reduce(\n                        (indexMap, [attr, value, id]) => {\n                            indexMap[attr] = ops.batch.merge(\n                                batchToken,\n                                {\n                                    [value]: ops.batch.filter(\n                                        batchToken,\n                                        rowId => rowId !== id,\n                                        indexMap[attr][value]\n                                    ),\n                                },\n                                indexMap[attr]\n                            );\n                            return indexMap;\n                        },\n                        { ...nextIndexes }\n                    ),\n                    nextIndexes\n                );\n            }\n        }\n\n        return ops.batch.merge(\n            batchToken,\n            {\n                [this.mapName]: nextMap,\n                indexes: nextIndexes,\n            },\n            branch\n        );\n    }\n\n    /**\n     * Returns the data structure without rows `rows`.\n     * @param  {Object} tx - transaction info\n     * @param  {Object} branch - the data structure state\n     * @param  {Object[]} rows - rows to update\n     * @return {Object} the data structure without ids in `idsToDelete`.\n     */\n    delete(tx, branch, rows) {\n        const { batchToken, withMutations } = tx;\n\n        const { arrName, mapName } = this;\n        const arr = branch[arrName];\n\n        const idsToDelete = rows.map(row => row[this.idAttribute]);\n        if (withMutations) {\n            idsToDelete.forEach(id => {\n                const idx = arr.indexOf(id);\n                ops.mutable.splice(idx, 1, [], arr);\n                ops.mutable.omit(id, branch[mapName]);\n            });\n            // delete ids from all indexes\n            Object.values(branch.indexes).forEach(attrIndex =>\n                Object.values(attrIndex).forEach(valueIndex =>\n                    idsToDelete.forEach(id => {\n                        const idx = valueIndex.indexOf(id);\n                        if (idx !== -1) {\n                            ops.mutable.splice(idx, 1, [], valueIndex);\n                        }\n                    })\n                )\n            );\n            return branch;\n        }\n\n        const nextIndexes = ops.batch.merge(\n            batchToken,\n            Object.entries(branch.indexes).reduce(\n                (indexMap, [attr, attrIndex]) => {\n                    indexMap[attr] = ops.batch.merge(\n                        batchToken,\n                        Object.entries(attrIndex).reduce(\n                            (attrIndexMap, [value, valueIndex]) => {\n                                attrIndexMap[value] = ops.batch.filter(\n                                    batchToken,\n                                    id => !idsToDelete.includes(id),\n                                    valueIndex\n                                );\n                                return attrIndexMap;\n                            },\n                            { ...indexMap[attr] }\n                        ),\n                        indexMap[attr]\n                    );\n                    return indexMap;\n                },\n                { ...branch.indexes }\n            ),\n            branch.indexes\n        );\n\n        return ops.batch.merge(\n            batchToken,\n            {\n                [arrName]: ops.batch.filter(\n                    batchToken,\n                    id => !idsToDelete.includes(id),\n                    branch[arrName]\n                ),\n                [mapName]: ops.batch.omit(\n                    batchToken,\n                    idsToDelete,\n                    branch[mapName]\n                ),\n                indexes: ops.batch.merge(\n                    batchToken,\n                    nextIndexes,\n                    branch.indexes\n                ),\n            },\n            branch\n        );\n    }\n}\n\nexport default Table;\n","import ops from \"immutable-ops\";\n\nimport { CREATE, UPDATE, DELETE, SUCCESS, STATE_FLAG } from \"../constants\";\n\nimport Table from \"./Table\";\n\nconst BASE_EMPTY_STATE = {};\nObject.defineProperty(BASE_EMPTY_STATE, STATE_FLAG, {\n    enumerable: true,\n    value: true,\n});\n\n/** @private */\nfunction replaceTableState(tableName, newTableState, tx, state) {\n    const { batchToken, withMutations } = tx;\n\n    if (withMutations) {\n        state[tableName] = newTableState;\n        return state;\n    }\n\n    return ops.batch.set(batchToken, tableName, newTableState, state);\n}\n\n/** @private */\nfunction query(tables, querySpec, state) {\n    const { table: tableName, clauses } = querySpec;\n    const table = tables[tableName];\n    const rows = table.query(state[tableName], clauses);\n    return {\n        rows,\n    };\n}\n\n/** @private */\nfunction update(tables, updateSpec, tx, state) {\n    const { action, payload } = updateSpec;\n\n    let tableName;\n    let nextTableState;\n    let resultPayload;\n\n    if (action === CREATE) {\n        ({ table: tableName } = updateSpec);\n        const table = tables[tableName];\n        const currTableState = state[tableName];\n        const result = table.insert(tx, currTableState, payload);\n        nextTableState = result.state;\n        resultPayload = result.created;\n    } else {\n        const { query: querySpec } = updateSpec;\n        ({ table: tableName } = querySpec);\n        const { rows } = query(tables, querySpec, state);\n\n        const table = tables[tableName];\n        const currTableState = state[tableName];\n\n        if (action === UPDATE) {\n            nextTableState = table.update(tx, currTableState, rows, payload);\n            // return updated rows\n            resultPayload = query(tables, querySpec, state).rows;\n        } else if (action === DELETE) {\n            nextTableState = table.delete(tx, currTableState, rows);\n            // return original rows that we just deleted\n            resultPayload = rows;\n        } else {\n            throw new Error(`Database received unknown update type: ${action}`);\n        }\n    }\n\n    const nextDBState = replaceTableState(tableName, nextTableState, tx, state);\n    return {\n        status: SUCCESS,\n        state: nextDBState,\n        payload: resultPayload,\n    };\n}\n\n/**\n * @memberof db\n * @param {Object} schemaSpec\n * @return Object database\n */\nexport function createDatabase(schemaSpec) {\n    const { tables: tableSpecs } = schemaSpec;\n    const tables = Object.entries(tableSpecs).reduce(\n        (map, [tableName, tableSpec]) => ({\n            ...map,\n            [tableName]: new Table(tableSpec),\n        }),\n        {}\n    );\n\n    const getEmptyState = () =>\n        Object.entries(tables).reduce(\n            (map, [tableName, table]) => ({\n                ...map,\n                [tableName]: table.getEmptyState(),\n            }),\n            BASE_EMPTY_STATE\n        );\n\n    return {\n        getEmptyState,\n        query: query.bind(null, tables),\n        update: update.bind(null, tables),\n        // Used to inspect the schema.\n        describe: tableName => tables[tableName],\n    };\n}\n\nexport default createDatabase;\n","import { ID_ARG_KEY_SELECTOR } from \"../constants\";\n\nexport default class SelectorSpec {\n    constructor({ parent, orm }) {\n        this._parent = parent;\n        this._orm = orm;\n        this.keySelector = ID_ARG_KEY_SELECTOR;\n    }\n\n    get cachePath() {\n        const basePath = this._parent ? this._parent.cachePath : [];\n        return [...basePath, this.key];\n    }\n\n    get orm() {\n        return this._orm;\n    }\n\n    get parent() {\n        return this._parent;\n    }\n}\n","import SelectorSpec from \"./SelectorSpec\";\n\nexport default class ModelBasedSelectorSpec extends SelectorSpec {\n    constructor({ model, ...other }) {\n        super(other);\n        this._model = model;\n    }\n\n    get resultFunc() {\n        return (session, idArg, ...other) => {\n            const { [this._model.modelName]: ModelClass } = session;\n            if (typeof idArg === \"undefined\") {\n                return ModelClass.all()\n                    .toModelArray()\n                    .map(instance =>\n                        this.valueForInstance(instance, session, ...other)\n                    );\n            }\n            if (Array.isArray(idArg)) {\n                return idArg.map(id =>\n                    this.valueForInstance(\n                        ModelClass.withId(id),\n                        session,\n                        ...other\n                    )\n                );\n            }\n            return this.valueForInstance(\n                ModelClass.withId(idArg),\n                session,\n                ...other\n            );\n        };\n    }\n\n    get model() {\n        return this._model;\n    }\n}\n","export default function idArgSelector(state, idArg) {\n    return idArg;\n}\n","import ModelBasedSelectorSpec from \"./ModelBasedSelectorSpec\";\nimport idArgSelector from \"./idArgSelector\";\n\nexport default class MapSelectorSpec extends ModelBasedSelectorSpec {\n    constructor({ field, selector, ...other }) {\n        super(other);\n        this._field = field;\n        this._selector = selector;\n    }\n\n    createResultFunc(parentSelector) {\n        const { idAttribute } = this._parent.toModel;\n        return (state, ...other) => {\n            /**\n             * The parent selector should return a ref array\n             * in case of a single ID being passed.\n             * Otherwise it should return an array of ref arrays.\n             */\n            const parentResult = parentSelector(state, ...other);\n            const idArg = idArgSelector(state, ...other);\n            const single = refArray => {\n                if (refArray === null) {\n                    // an intermediate field could not be resolved\n                    return null;\n                }\n                return refArray.map(ref =>\n                    this._selector(state, ref[idAttribute])\n                );\n            };\n            if (typeof idArg === \"undefined\" || Array.isArray(idArg)) {\n                return parentResult.map(single);\n            }\n            return single(parentResult);\n        };\n    }\n\n    get selector() {\n        return this._selector;\n    }\n\n    set selector(selector) {\n        this._selector = selector;\n    }\n\n    get key() {\n        return this._selector;\n    }\n}\n","import SelectorSpec from \"./SelectorSpec\";\nimport idArgSelector from \"./idArgSelector\";\n\nexport default class ModelSelectorSpec extends SelectorSpec {\n    constructor({ model, ...other }) {\n        super(other);\n        this._model = model;\n    }\n\n    get key() {\n        return this._model.modelName;\n    }\n\n    get dependencies() {\n        return [this._orm, idArgSelector];\n    }\n\n    get resultFunc() {\n        return ({ [this._model.modelName]: ModelClass }, idArg) => {\n            if (typeof idArg === \"undefined\") {\n                return ModelClass.all().toRefArray();\n            }\n            if (Array.isArray(idArg)) {\n                return idArg.map(id => {\n                    const instance = ModelClass.withId(id);\n                    return instance ? instance.ref : null;\n                });\n            }\n            const instance = ModelClass.withId(idArg);\n            return instance ? instance.ref : null;\n        };\n    }\n\n    get model() {\n        return this._model;\n    }\n}\n","import MapSelectorSpec from \"./MapSelectorSpec\";\nimport ModelSelectorSpec from \"./ModelSelectorSpec\";\nimport ModelBasedSelectorSpec from \"./ModelBasedSelectorSpec\";\nimport idArgSelector from \"./idArgSelector\";\n\nimport QuerySet from \"../QuerySet\";\nimport Model from \"../Model\";\n\nimport ForeignKey from \"../fields/ForeignKey\";\nimport ManyToMany from \"../fields/ManyToMany\";\n\nexport default class FieldSelectorSpec extends ModelBasedSelectorSpec {\n    constructor({ field, fieldModel, accessorName, isVirtual, ...other }) {\n        super(other);\n        this._field = field;\n        this._fieldModel = fieldModel;\n        this._accessorName = accessorName;\n        this._isVirtual = isVirtual;\n    }\n\n    get key() {\n        return this._accessorName;\n    }\n\n    get dependencies() {\n        return [this._orm, idArgSelector];\n    }\n\n    valueForInstance(instance, session) {\n        if (!instance) {\n            return null;\n        }\n        let value;\n        if (this._parent instanceof ModelSelectorSpec) {\n            /* orm.Model.field */\n            value = instance[this._accessorName];\n        } else {\n            /* orm.Model.field1.field2..fieldN.field */\n            const { [this._parent.toModelName]: ParentToModel } = session;\n            const parentRef = this._parent.valueForInstance(instance, session);\n            const parentInstance = parentRef\n                ? new ParentToModel(parentRef)\n                : null;\n            value = parentInstance ? parentInstance[this._accessorName] : null;\n        }\n        if (value instanceof Model) {\n            return value.ref;\n        }\n        if (value instanceof QuerySet) {\n            return value.toRefArray();\n        }\n        return value;\n    }\n\n    map(selector) {\n        if (selector instanceof ModelSelectorSpec) {\n            if (this.toModelName === selector.model.modelName) {\n                throw new Error(\n                    `Cannot select models in a \\`map()\\` call. If you just want the \\`${this._accessorName}\\` as a ref array then you can simply drop the \\`map()\\`. Otherwise make sure you're passing a field selector of the form \\`${this.toModelName}.<field>\\` or a custom selector instead.`\n                );\n            } else {\n                throw new Error(\n                    `Cannot select \\`${selector.model.modelName}\\` models in this \\`map()\\` call. Make sure you're passing a field selector of the form \\`${this.toModelName}.<field>\\` or a custom selector instead.`\n                );\n            }\n        } else if (\n            selector instanceof FieldSelectorSpec ||\n            selector instanceof MapSelectorSpec\n        ) {\n            if (this.toModelName !== selector.model.modelName) {\n                throw new Error(\n                    `Cannot select fields of the \\`${selector.model.modelName}\\` model in this \\`map()\\` call. Make sure you're passing a field selector of the form \\`${this.toModelName}.<field>\\` or a custom selector instead.`\n                );\n            }\n        } else if (\n            !selector ||\n            typeof selector !== \"function\" ||\n            !selector.recomputations\n        ) {\n            throw new Error(\n                `\\`map()\\` requires a selector as an input. Received: ${JSON.stringify(\n                    selector\n                )} of type ${typeof selector}`\n            );\n        }\n        if (\n            !(this._field instanceof ForeignKey) &&\n            !(this._field instanceof ManyToMany)\n        ) {\n            throw new Error(\"Cannot map selectors for non-collection fields\");\n        }\n        return new MapSelectorSpec({\n            parent: this,\n            model: this._model,\n            orm: this._orm,\n            field: this._field,\n            selector,\n        });\n    }\n\n    get toModelName() {\n        return this._field.toModelName === \"this\"\n            ? this._fieldModel.modelName\n            : this._field.toModelName;\n    }\n\n    get toModel() {\n        const db = this._orm.getDatabase();\n        return db.describe(this.toModelName);\n    }\n}\n","import ForeignKey from \"../fields/ForeignKey\";\nimport ManyToMany from \"../fields/ManyToMany\";\nimport RelationalField from \"../fields/RelationalField\";\n\nimport FieldSelectorSpec from \"./FieldSelectorSpec\";\nimport ModelSelectorSpec from \"./ModelSelectorSpec\";\n\n/**\n * @module selectors\n * @private\n */\n\nexport function createFieldSelectorSpec({\n    parent,\n    model,\n    field,\n    fieldModel,\n    accessorName,\n    orm,\n    isVirtual,\n}) {\n    const fieldSelectorSpec = new FieldSelectorSpec({\n        parent,\n        model,\n        field,\n        fieldModel,\n        accessorName,\n        orm,\n        isVirtual,\n    });\n    /* Do not even try to create field selectors below attributes. */\n    if (!(field instanceof RelationalField)) {\n        // \"orm.Author.name.publisher\" would be nonsense\n        return fieldSelectorSpec;\n    }\n    /* Prevent field selectors below collections. */\n    if (parent instanceof FieldSelectorSpec) {\n        /* eslint-disable no-underscore-dangle */\n        if (\n            // \"orm.Author.books.publisher\" would be nonsense\n            (parent._field instanceof ForeignKey && parent._isVirtual) ||\n            // \"orm.Genre.books.publisher\" would be nonsense\n            parent._field instanceof ManyToMany\n        ) {\n            throw new Error(\n                `Cannot create a selector for \\`${parent._accessorName}.${accessorName}\\` because \\`${parent._accessorName}\\` is a collection field.`\n            );\n        }\n    }\n    const { toModelName } = field;\n    const toModel = orm.get(\n        toModelName === \"this\" ? model.modelName : toModelName\n    );\n    Object.entries(toModel.fields).forEach(\n        ([relatedFieldName, relatedField]) => {\n            const fieldAccessorName = relatedField.as || relatedFieldName;\n            Object.defineProperty(fieldSelectorSpec, fieldAccessorName, {\n                get: () =>\n                    createFieldSelectorSpec({\n                        parent: fieldSelectorSpec,\n                        model,\n                        fieldModel: toModel,\n                        field: relatedField,\n                        accessorName: fieldAccessorName,\n                        orm,\n                        isVirtual: false,\n                    }),\n            });\n        }\n    );\n    Object.entries(toModel.virtualFields).forEach(\n        ([relatedFieldName, relatedField]) => {\n            const fieldAccessorName = relatedField.as || relatedFieldName;\n            if (fieldSelectorSpec.hasOwnProperty(fieldAccessorName)) {\n                return;\n            }\n            Object.defineProperty(fieldSelectorSpec, fieldAccessorName, {\n                get: () =>\n                    createFieldSelectorSpec({\n                        parent: fieldSelectorSpec,\n                        model,\n                        fieldModel: toModel,\n                        field: relatedField,\n                        accessorName: fieldAccessorName,\n                        orm,\n                        isVirtual: true,\n                    }),\n            });\n        }\n    );\n    return fieldSelectorSpec;\n}\n\nexport function createModelSelectorSpec({ model, orm }) {\n    const modelSelectorSpec = new ModelSelectorSpec({\n        parent: null,\n        orm,\n        model,\n    });\n\n    Object.entries(model.fields).forEach(([fieldName, field]) => {\n        const fieldAccessorName = field.as || fieldName;\n        Object.defineProperty(modelSelectorSpec, fieldAccessorName, {\n            get: () =>\n                createFieldSelectorSpec({\n                    parent: modelSelectorSpec,\n                    model,\n                    fieldModel: model,\n                    field,\n                    accessorName: fieldAccessorName,\n                    orm,\n                    isVirtual: false,\n                }),\n        });\n    });\n\n    Object.entries(model.virtualFields).forEach(([fieldName, field]) => {\n        const fieldAccessorName = field.as || fieldName;\n        if (modelSelectorSpec.hasOwnProperty(fieldAccessorName)) {\n            return;\n        }\n        Object.defineProperty(modelSelectorSpec, fieldAccessorName, {\n            get: () =>\n                createFieldSelectorSpec({\n                    parent: modelSelectorSpec,\n                    model,\n                    fieldModel: model,\n                    field,\n                    accessorName: fieldAccessorName,\n                    orm,\n                    isVirtual: true,\n                }),\n        });\n    });\n\n    return modelSelectorSpec;\n}\n","/* eslint-disable max-classes-per-file */\nimport Session from \"./Session\";\nimport Model from \"./Model\";\nimport { createDatabase as defaultCreateDatabase } from \"./db\";\nimport { attr } from \"./fields\";\nimport Field from \"./fields/Field\";\nimport ForeignKey from \"./fields/ForeignKey\";\nimport ManyToMany from \"./fields/ManyToMany\";\n\nimport { createModelSelectorSpec } from \"./selectors\";\n\nimport {\n    m2mName,\n    attachQuerySetMethods,\n    m2mToFieldName,\n    m2mFromFieldName,\n    warnDeprecated,\n} from \"./utils\";\n\nconst ORM_DEFAULTS = {\n    createDatabase: defaultCreateDatabase,\n};\n\nconst RESERVED_TABLE_OPTIONS = [\"indexes\", \"meta\"];\nconst isReservedTableOption = word => RESERVED_TABLE_OPTIONS.includes(word);\n\n/**\n * ORM - the Object Relational Mapper.\n *\n * Use instances of this class to:\n *\n * - Register your {@link Model} classes using {@link ORM#register}\n * - Get the empty state for the underlying database with {@link ORM#getEmptyState}\n * - Start an immutable database session with {@link ORM#session}\n * - Start a mutating database session with {@link ORM#mutableSession}\n *\n * Internally, this class handles generating a schema specification from models\n * to the database.\n */\nclass ORM {\n    /**\n     * Creates a new ORM instance.\n     *\n     * @param {Object} [opts]\n     * @param {Function} [opts.stateSelector] - function that given a Redux state tree\n     *                                          will return the ORM state's subtree,\n     *                                          e.g. `state => state.orm`\n     *                                          (necessary if you want to use selectors)\n     * @param {Function} [opts.createDatabase] - function that creates a database\n     */\n    constructor(opts) {\n        const { createDatabase } = { ...ORM_DEFAULTS, ...(opts || {}) };\n        this.createDatabase = createDatabase;\n        this.registry = [];\n        this.implicitThroughModels = [];\n        this.installedFields = {};\n        this.stateSelector = opts ? opts.stateSelector : null;\n    }\n\n    /**\n     * Registers a {@link Model} class to the ORM.\n     *\n     * If the model has declared any ManyToMany fields, their\n     * through models will be generated and registered with\n     * this call, unless a custom through model has been specified.\n     *\n     * @param  {...Model} models - a {@link Model} class to register\n     * @return {undefined}\n     */\n    register(...models) {\n        models.forEach(model => {\n            if (model.modelName === undefined) {\n                throw new Error(\n                    \"A model was passed that doesn't have a modelName set\"\n                );\n            }\n\n            model.invalidateClassCache();\n\n            this.registerManyToManyModelsFor(model);\n            this.registry.push(model);\n\n            Object.defineProperty(this, model.modelName, {\n                get: () => {\n                    // make sure virtualFields are set up\n                    this._setupModelPrototypes(this.registry);\n\n                    return createModelSelectorSpec({\n                        model,\n                        orm: this,\n                    });\n                },\n            });\n        });\n    }\n\n    registerManyToManyModelsFor(model) {\n        const { fields } = model;\n        const thisModelName = model.modelName;\n\n        Object.entries(fields).forEach(([fieldName, fieldInstance]) => {\n            if (!(fieldInstance instanceof ManyToMany)) {\n                return;\n            }\n\n            let toModelName;\n            if (fieldInstance.toModelName === \"this\") {\n                toModelName = thisModelName;\n            } else {\n                toModelName = fieldInstance.toModelName; // eslint-disable-line prefer-destructuring\n            }\n\n            const selfReferencing = thisModelName === toModelName;\n            const fromFieldName = m2mFromFieldName(thisModelName);\n            const toFieldName = m2mToFieldName(toModelName);\n\n            if (fieldInstance.through) {\n                if (selfReferencing && !fieldInstance.throughFields) {\n                    throw new Error(\n                        \"Self-referencing many-to-many relationship at \" +\n                            `\"${thisModelName}.${fieldName}\" using custom ` +\n                            `model \"${fieldInstance.through}\" has no ` +\n                            \"throughFields key. Cannot determine which \" +\n                            \"fields reference the instances partaking \" +\n                            \"in the relationship.\"\n                    );\n                }\n            } else {\n                const Through = class ThroughModel extends Model {};\n\n                Through.modelName = m2mName(thisModelName, fieldName);\n\n                const PlainForeignKey = class PlainForeignKey extends ForeignKey {\n                    get installsBackwardsVirtualField() {\n                        return false;\n                    }\n\n                    get installsBackwardsDescriptor() {\n                        return false;\n                    }\n                };\n                const ForeignKeyClass = selfReferencing\n                    ? PlainForeignKey\n                    : ForeignKey;\n                Through.fields = {\n                    id: attr(),\n                    [fromFieldName]: new ForeignKeyClass(thisModelName),\n                    [toFieldName]: new ForeignKeyClass(toModelName),\n                };\n\n                Through.invalidateClassCache();\n                this.implicitThroughModels.push(Through);\n            }\n        });\n    }\n\n    /**\n     * Gets a {@link Model} class by its name from the registry.\n     * @param  {string} modelName - the name of the {@link Model} class to get\n     * @throws If {@link Model} class is not found.\n     * @return {Model} the {@link Model} class, if found\n     */\n    get(modelName) {\n        const allModels = this.registry.concat(this.implicitThroughModels);\n        const found = Object.values(allModels).find(\n            model => model.modelName === modelName\n        );\n\n        if (typeof found === \"undefined\") {\n            throw new Error(`Did not find model ${modelName} from registry.`);\n        }\n        return found;\n    }\n\n    getModelClasses() {\n        this._setupModelPrototypes(this.registry);\n        this._setupModelPrototypes(this.implicitThroughModels);\n        return this.registry.concat(this.implicitThroughModels);\n    }\n\n    generateSchemaSpec() {\n        const models = this.getModelClasses();\n        const tables = models.reduce((spec, modelClass) => {\n            const tableName = modelClass.modelName;\n            const tableSpec = modelClass.tableOptions();\n            Object.keys(tableSpec)\n                .filter(isReservedTableOption)\n                .forEach(key => {\n                    throw new Error(\n                        `Reserved keyword \\`${key}\\` used in ${tableName}.options.`\n                    );\n                });\n            spec[tableName] = {\n                fields: { ...modelClass.fields },\n                ...tableSpec,\n            };\n            return spec;\n        }, {});\n        return { tables };\n    }\n\n    getDatabase() {\n        if (!this.db) {\n            this.db = this.createDatabase(this.generateSchemaSpec());\n        }\n        return this.db;\n    }\n\n    /**\n     * Returns the empty database state.\n     * @return {Object} the empty state\n     */\n    getEmptyState() {\n        return this.getDatabase().getEmptyState();\n    }\n\n    /**\n     * Begins an immutable database session.\n     *\n     * @param  {Object} state  - the state the database manages\n     * @return {Session} a new {@link Session} instance\n     */\n    session(state) {\n        return new Session(this, this.getDatabase(), state);\n    }\n\n    /**\n     * Begins a mutable database session.\n     *\n     * @param  {Object} state  - the state the database manages\n     * @return {Session} a new {@link Session} instance\n     */\n    mutableSession(state) {\n        return new Session(this, this.getDatabase(), state, true);\n    }\n\n    /**\n     * @private\n     */\n    _setupModelPrototypes(models) {\n        models\n            .filter(model => !model.isSetUp)\n            .forEach(model => {\n                const { fields, modelName, querySetClass } = model;\n                Object.entries(fields).forEach(([fieldName, field]) => {\n                    if (!(field instanceof Field)) {\n                        throw new Error(\n                            `${modelName}.${fieldName} is of type \"${typeof field}\" ` +\n                                \"but must be an instance of Field. Please use the \" +\n                                \"`attr`, `fk`, `oneToOne` and `many` \" +\n                                \"functions to define fields.\"\n                        );\n                    }\n                    if (!this._isFieldInstalled(modelName, fieldName)) {\n                        this._installField(field, fieldName, model);\n                        this._setFieldInstalled(modelName, fieldName);\n                    }\n                });\n                attachQuerySetMethods(model, querySetClass);\n                model.isSetUp = true;\n            });\n    }\n\n    /**\n     * @private\n     */\n    _isFieldInstalled(modelName, fieldName) {\n        return this.installedFields.hasOwnProperty(modelName)\n            ? !!this.installedFields[modelName][fieldName]\n            : false;\n    }\n\n    /**\n     * @private\n     */\n    _setFieldInstalled(modelName, fieldName) {\n        if (!this.installedFields.hasOwnProperty(modelName)) {\n            this.installedFields[modelName] = {};\n        }\n        this.installedFields[modelName][fieldName] = true;\n    }\n\n    /**\n     * Installs a field on a model and its related models if necessary.\n     * @private\n     */\n    _installField(field, fieldName, model) {\n        const FieldInstaller = field.installerClass;\n        new FieldInstaller({\n            field,\n            fieldName,\n            model,\n            orm: this,\n        }).run();\n    }\n\n    // DEPRECATED AND REMOVED METHODS\n\n    /**\n     * @deprecated Use {@link ORM#mutableSession} instead.\n     */\n    withMutations(state) {\n        warnDeprecated(\n            \"`ORM.prototype.withMutations` has been deprecated. \" +\n                \"Use `ORM.prototype.mutableSession` instead.\"\n        );\n        return this.mutableSession(state);\n    }\n\n    /**\n     * @deprecated Use {@link ORM#session} instead.\n     */\n    from(state) {\n        warnDeprecated(\n            \"`ORM.prototype.from` has been deprecated. \" +\n                \"Use `ORM.prototype.session` instead.\"\n        );\n        return this.session(state);\n    }\n\n    /**\n     * @deprecated Use {@link ORM#getEmptyState} instead.\n     */\n    getDefaultState() {\n        warnDeprecated(\n            \"`ORM.prototype.getDefaultState` has been deprecated. Use \" +\n                \"`ORM.prototype.getEmptyState` instead.\"\n        );\n        return this.getEmptyState();\n    }\n\n    /**\n     * @deprecated Define a Model class instead.\n     */\n    define() {\n        throw new Error(\n            \"`ORM.prototype.define` has been removed. Please define a Model class.\"\n        );\n    }\n}\n\nexport function DeprecatedSchema() {\n    throw new Error(\n        \"Schema has been renamed to ORM. Please import ORM instead of Schema \" +\n            \"from Redux-ORM.\"\n    );\n}\n\nexport { ORM };\n\nexport default ORM;\n","import { STATE_FLAG } from \"./constants\";\n\nconst defaultEqualityCheck = (a, b) => a === b;\nexport const eqCheck = defaultEqualityCheck;\n\nconst isOrmState = arg =>\n    arg && typeof arg === \"object\" && arg.hasOwnProperty(STATE_FLAG);\n\nconst argsAreEqual = (lastArgs, nextArgs, equalityCheck) =>\n    nextArgs.every(\n        (arg, index) =>\n            (isOrmState(arg) && isOrmState(lastArgs[index])) ||\n            equalityCheck(arg, lastArgs[index])\n    );\n\nconst rowsAreEqual = (ids, rowsA, rowsB) =>\n    ids.every(id => rowsA[id] === rowsB[id]);\n\nconst accessedModelInstancesAreEqual = (previous, ormState, orm) => {\n    const { accessedInstances } = previous;\n\n    return Object.entries(accessedInstances).every(([modelName, instances]) => {\n        // if the entire table has not been changed, we have nothing to do\n        if (previous.ormState[modelName] === ormState[modelName]) {\n            return true;\n        }\n\n        const { mapName } = orm.getDatabase().describe(modelName);\n\n        const { [mapName]: previousRows } = previous.ormState[modelName];\n        const { [mapName]: rows } = ormState[modelName];\n\n        const accessedIds = Object.keys(instances);\n        return rowsAreEqual(accessedIds, previousRows, rows);\n    });\n};\n\nconst accessedIndexesAreEqual = (previous, ormState) => {\n    const { accessedIndexes } = previous;\n\n    return Object.entries(accessedIndexes).every(([modelName, indexes]) =>\n        Object.entries(indexes).every(([column, values]) =>\n            values.every(\n                value =>\n                    previous.ormState[modelName].indexes[column][value] ===\n                    ormState[modelName].indexes[column][value]\n            )\n        )\n    );\n};\n\nconst fullTableScannedModelsAreEqual = (previous, ormState) =>\n    previous.fullTableScannedModels.every(\n        modelName => previous.ormState[modelName] === ormState[modelName]\n    );\n\n/**\n * A memoizer to use with redux-orm\n * selectors. When the memoized function is first run,\n * the memoizer will remember the models that are accessed\n * during that function run.\n *\n * On subsequent runs, the memoizer will check if those\n * models' states have changed compared to the previous run.\n *\n * Memoization algorithm operates like this:\n *\n * 1. Has the selector been run before? If not, go to 6.\n *\n * 2. If the selector has other input selectors in addition to the\n *    ORM state selector, check their results for equality with the previous results.\n *    If they aren't equal, go to 6.\n *\n * 3. Some filter queries may have required scanning entire tables during the last run.\n *    If any of those tables have changed, go to 6.\n *\n * 4. Check which foreign key indexes the database has used to speed up queries\n *    during the last run. If any have changed, go to 6.\n *\n * 5. Check which Model's instances the selector has accessed during the last run.\n *    Check for equality with each of those states versus their states in the\n *    previous ORM state. If all of them are equal, return the previous result.\n *\n * 6. Run the selector. Check the Session object used by the selector for\n *    which Model's states were accessed, and merge them with the previously\n *    saved information about accessed models (if-else branching can change\n *    which models are accessed on different inputs). Save the ORM state and\n *    other arguments the selector was called with, overriding previously\n *    saved values. Save the selector result. Return the selector result.\n *\n * @private\n * @param  {Function} func - function to memoize\n * @param  {Function} argEqualityCheck - equality check function to use with normal\n *                                       selector args\n * @param  {ORM} orm - a redux-orm ORM instance\n * @return {Function} `func` memoized.\n */\nexport function memoize(func, argEqualityCheck = defaultEqualityCheck, orm) {\n    let previous = {\n        /* Result of the previous function call */\n        result: null,\n        /* Arguments to the previous function call (excluding ORM state) */\n        args: null,\n        /**\n         * Snapshot of the previous database.\n         *\n         * Lets us know how the tables looked like\n         * during the previous function call.\n         */\n        ormState: null,\n        /**\n         * Names of models whose tables have been scanned completely\n         * during previous function call (contains only model names)\n         * Format example: ['Book']\n         */\n        fullTableScannedModels: [],\n        /**\n         * Map of which model instances have been accessed\n         * during previous function call.\n         * Contains only PKs of accessed instances.\n         * Format example: { Book: { 1: true, 3: true } }\n         */\n        accessedInstances: {},\n        /**\n         * Map of which attribute indexes have been accessed\n         * during previous function call.\n         * Contains only attributes that were actually filtered on.\n         * Author.withId(3).books would add 3 to the authorId index below.\n         * Format example: { Book: { authorId: [1, 2], publisherId: [5] } }\n         */\n        accessedIndexes: {},\n    };\n\n    return (...stateAndArgs) => {\n        /**\n         * The first argument to this function needs to be\n         * the ORM's reducer state in the user's Redux store.\n         */\n        const [ormState, ...args] = stateAndArgs;\n\n        const selectorWasCalledBefore = Boolean(previous.args);\n        if (\n            selectorWasCalledBefore &&\n            argsAreEqual(previous.args, args, argEqualityCheck) &&\n            fullTableScannedModelsAreEqual(previous, ormState) &&\n            accessedIndexesAreEqual(previous, ormState) &&\n            accessedModelInstancesAreEqual(previous, ormState, orm)\n        ) {\n            /**\n             * None of this selector's dependencies have changed\n             * since the last time that we called it.\n             */\n            return previous.result;\n        }\n\n        /**\n         * Start a session so that the selector can access the database.\n         * Make this session immutable. This way we can find out if\n         * the operations that the selector performs are cacheable.\n         */\n        const session = orm.session(ormState);\n        /* Replace all ORM state arguments by the session above */\n        const argsWithSession = args.map(arg =>\n            isOrmState(arg) ? session : arg\n        );\n\n        /* This is where we call the actual function */\n        const result = func.apply(null, argsWithSession); // eslint-disable-line prefer-spread\n\n        /**\n         * The metadata for the previous call are no longer valid.\n         * Update cached values.\n         */\n        previous = {\n            /* Arguments that were passed to the selector */\n            args,\n            /* Selector result */\n            result,\n            /* Redux state slice for session.state */\n            ormState,\n            /* Rows retrieved by resolved primary key */\n            accessedInstances: session.accessedModelInstances,\n            /* Foreign key indexes that were used to speed up queries */\n            accessedIndexes: session.accessedIndexes,\n            /* Tables that had to be scanned completely */\n            fullTableScannedModels: session.fullTableScannedModels,\n        };\n\n        return result;\n    };\n}\n","import { createSelectorCreator } from \"reselect\";\nimport createCachedSelector, { FlatMapCache } from \"re-reselect\";\n\nimport { memoize } from \"./memoize\";\n\nimport { ORM } from \"./ORM\";\nimport SelectorSpec from \"./selectors/SelectorSpec\";\nimport MapSelectorSpec from \"./selectors/MapSelectorSpec\";\n\n/**\n * @module redux\n * @desc Provides functions for integration with Redux.\n */\n\n/**\n * Calls all models' reducers if they exist.\n *\n * @return {undefined}\n * @global\n */\nexport function defaultUpdater(session, action) {\n    session.sessionBoundModels.forEach(modelClass => {\n        if (typeof modelClass.reducer === \"function\") {\n            // This calls this.applyUpdate to update this.state\n            modelClass.reducer(action, modelClass, session);\n        }\n    });\n}\n\n/**\n * Call the returned function to pass actions to Redux-ORM.\n *\n * @global\n *\n * @param {ORM} orm - the ORM instance.\n * @param {Function} [updater] - the function updating the ORM state based on the given action.\n * @return {Function} reducer that will update the ORM state.\n */\nexport function createReducer(orm, updater = defaultUpdater) {\n    return (state, action) => {\n        const session = orm.session(state || orm.getEmptyState());\n        updater(session, action);\n        return session.state;\n    };\n}\n\n/**\n * @private\n * @param {SelectorSpec} spec\n */\nfunction createSelectorFromSpec(spec) {\n    if (spec instanceof MapSelectorSpec) {\n        const parentSelector = createSelectorFromSpec(spec.parent);\n        return spec.createResultFunc(parentSelector);\n    }\n    return createCachedSelector(\n        spec.dependencies,\n        spec.resultFunc\n    )({\n        keySelector: spec.keySelector,\n        cacheObject: new FlatMapCache(),\n        selectorCreator: createSelector, // eslint-disable-line no-use-before-define\n    });\n}\n\n/**\n * Tries to find ORM instance using the argument.\n * @private\n * @param {*} arg\n */\nfunction toORM(arg) {\n    /* eslint-disable no-underscore-dangle */\n    if (arg instanceof ORM) {\n        return arg;\n    }\n    if (arg instanceof SelectorSpec) {\n        return arg._orm;\n    }\n    return false;\n}\n\nconst selectorCache = new Map();\nconst SELECTOR_KEY = Symbol.for(\"REDUX_ORM_SELECTOR\");\n\n/**\n * @private\n * @param {function|ORM|SelectorSpec} arg\n */\nfunction toSelector(arg) {\n    if (typeof arg === \"function\") {\n        return arg;\n    }\n    if (arg instanceof ORM) {\n        return arg.stateSelector;\n    }\n    if (arg instanceof MapSelectorSpec) {\n        // the argument to map() needs to be callable\n        arg.selector = toSelector(arg.selector);\n    }\n    if (arg instanceof SelectorSpec) {\n        const { orm, cachePath } = arg;\n        let level;\n\n        // the selector cache for the spec's ORM\n        if (!selectorCache.has(orm)) {\n            selectorCache.set(orm, new Map());\n        }\n        const ormSelectors = selectorCache.get(orm);\n\n        /**\n         * Drill down into selector map by cachePath.\n         *\n         * The selector itself is stored under a special SELECTOR_KEY\n         * so that we can store selectors below it as well.\n         */\n        level = ormSelectors;\n        for (let i = 0; i < cachePath.length; ++i) {\n            const storageKey = cachePath[i];\n            if (!level.has(storageKey)) {\n                level.set(storageKey, new Map());\n            }\n            level = level.get(storageKey);\n        }\n        if (level && level.has(SELECTOR_KEY)) {\n            // Cache hit: the selector has been created before\n            return level.get(SELECTOR_KEY);\n        }\n        // Cache miss: the selector needs to be created\n        const selector = createSelectorFromSpec(arg);\n        // Save the selector at the cachePath position\n        level.set(SELECTOR_KEY, selector);\n\n        return selector;\n    }\n    throw new Error(\n        `Failed to interpret selector argument: ${JSON.stringify(\n            arg\n        )} of type ${typeof arg}`\n    );\n}\n\n/**\n * Returns a memoized selector based on passed arguments.\n * This is similar to `reselect`'s `createSelector`,\n * except you can also pass a single function to be memoized.\n *\n * If you pass multiple functions, the format will be the\n * same as in `reselect`. The last argument is the selector\n * function and the previous are input selectors.\n *\n * When you use this method to create a selector, the returned selector\n * expects the whole `redux-orm` state branch as input. In the selector\n * function that you pass as the last argument, any of the arguments\n * you pass first will be considered selectors and mapped\n * to their outputs, like in `reselect`.\n *\n * Here are some example selectors:\n *\n * ```javascript\n * // orm is an instance of ORM\n * // reduxState is the state of a Redux store\n * const books = createSelector(orm.Book);\n * books(reduxState) // array of book refs\n *\n * const bookAuthors = createSelector(orm.Book.authors);\n * bookAuthors(reduxState) // two-dimensional array of author refs for each book\n * ```\n * Selectors can easily be applied to related models:\n * ```javascript\n * const bookAuthorNames = createSelector(\n *     orm.Book.authors.map(orm.Author.name),\n * );\n * bookAuthorNames(reduxState, 8) // names of all authors of book with ID 8\n * bookAuthorNames(reduxState, [8, 9]) // 2D array of names of all authors of books with IDs 8 and 9\n * ```\n * Also note that `orm.Author.name` did not need to be wrapped in another `createSelector` call,\n * although that would be possible.\n *\n * For more complex calculations you can access\n * entire session objects by passing an ORM instance.\n * ```javascript\n * const freshBananasCost = createSelector(\n *     orm,\n *     session => {\n *        const banana = session.Product.get({\n *            name: \"Banana\",\n *        });\n *        // amount of fresh bananas in shopping cart\n *        const amount = session.ShoppingCart.filter({\n *            product_id: banana.id,\n *            is_fresh: true,\n *        }).count();\n *        return `USD ${amount * banana.price}`;\n *     }\n * );\n * ```\n *\n * redux-orm uses a special memoization function to avoid recomputations.\n *\n * Everytime a selector runs, this function records which instances\n * of your `Model`s were accessed.<br>\n * On subsequent runs, the selector first checks if the previously\n * accessed instances or `args` have changed in any way:\n * <ul>\n *     <li>If yes, the selector calls the function you passed to it.</li>\n *     <li>If not, it just returns the previous result\n *         (unless you call it for the first time).</li>\n * </ul>\n *\n * This way you can use pure rendering in your React components\n * for performance gains.\n *\n * @global\n *\n * @param  {...Function} args - zero or more input selectors\n *                              and the selector function.\n * @return {Function} memoized selector\n */\nexport function createSelector(...args) {\n    if (!args.length) {\n        throw new Error(\"Cannot create a selector without arguments.\");\n    }\n\n    const resultArg = args.pop();\n    const dependencies = Array.isArray(args[0]) ? args[0] : args;\n\n    const orm = dependencies.map(toORM).find(Boolean);\n    const inputFuncs = dependencies.map(toSelector);\n\n    if (typeof resultArg === \"function\") {\n        if (!orm) {\n            throw new Error(\n                \"Failed to resolve the current ORM database state. Please pass an ORM instance or an ORM selector as an argument to `createSelector()`.\"\n            );\n        } else if (!orm.stateSelector) {\n            throw new Error(\n                \"Failed to resolve the current ORM database state. Please pass an object to the ORM constructor that specifies a `stateSelector` function.\"\n            );\n        } else if (typeof orm.stateSelector !== \"function\") {\n            throw new Error(\n                `Failed to resolve the current ORM database state. Please pass a function when specifying the ORM's \\`stateSelector\\`. Received: ${JSON.stringify(\n                    orm.stateSelector\n                )} of type ${typeof orm.stateSelector}`\n            );\n        }\n\n        return createSelectorCreator(\n            memoize,\n            undefined,\n            orm\n        )([orm.stateSelector, ...inputFuncs], resultArg);\n    }\n\n    if (resultArg instanceof ORM) {\n        throw new Error(\n            \"ORM instances cannot be the result function of selectors. You can access your models in the last function that you pass to `createSelector()`.\"\n        );\n    }\n    if (inputFuncs.length) {\n        console.warn(\n            \"Your input selectors will be ignored: the passed result function does not require any input.\"\n        );\n    }\n\n    return toSelector(resultArg);\n}\n","import QuerySet from \"./QuerySet\";\nimport Model from \"./Model\";\nimport { DeprecatedSchema, ORM } from \"./ORM\";\nimport Session from \"./Session\";\nimport { createReducer, createSelector } from \"./redux\";\nimport ForeignKey from \"./fields/ForeignKey\";\nimport ManyToMany from \"./fields/ManyToMany\";\nimport OneToOne from \"./fields/OneToOne\";\nimport Attribute from \"./fields/Attribute\";\nimport { fk, many, oneToOne, attr } from \"./fields\";\n\nconst Schema = DeprecatedSchema;\n\nconst Backend = function RemovedBackend() {\n    throw new Error(\n        \"Having a custom Backend instance is now unsupported. \" +\n            \"Documentation for database customization is upcoming, for now \" +\n            \"please look at the db folder in the source.\"\n    );\n};\n\nexport {\n    Attribute,\n    QuerySet,\n    Model,\n    ORM,\n    Schema,\n    Backend,\n    Session,\n    ForeignKey,\n    ManyToMany,\n    OneToOne,\n    fk,\n    many,\n    attr,\n    oneToOne,\n    createReducer,\n    createSelector,\n};\n\nexport default Model;\n"],"sourceRoot":""}